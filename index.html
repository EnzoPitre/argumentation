<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FM Spray - Negotiator Pro</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@400;700&family=Inter:wght@300;400;500;600;800&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; }
        h1, h2, h3, .font-condensed { font-family: 'Roboto Condensed', sans-serif; }
        
        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #e2e8f0; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 10px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #64748b; }
        
        .nav-item {
            transition: all 0.2s ease;
            border-left: 4px solid transparent;
        }
        .nav-item.active {
            background-color: #ffffff;
            color: #dc2626;
            border-left: 4px solid #dc2626;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .tab-btn.active {
            border-bottom: 3px solid #dc2626;
            color: #dc2626;
            background-color: #fff1f2;
        }

        .color-dot {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 1px solid #cbd5e1;
            margin-right: 8px;
            flex-shrink: 0;
        }
        
        .arg-bullet {
            min-width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: #f1f5f9;
            color: #64748b;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            font-weight: bold;
            margin-right: 8px;
        }

        /* Styles sp√©cifiques Objections */
        .objection-card { transition: all 0.2s ease-in-out; }
        .objection-card:hover { transform: translateY(-2px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        .response-box { border-left: 4px solid #2563eb; }
        .theme-filter-btn.active { background-color: #1e293b; color: white; border-color: #1e293b; }

        /* Styles Calculatrice */
        .calc-input:focus { outline: none; border-color: #dc2626; ring: 2px solid #fecaca; }
    </style>
</head>
<body class="text-slate-900 h-screen flex overflow-hidden">

    <!-- SIDEBAR -->
    <aside class="w-72 bg-slate-900 text-white flex-shrink-0 flex flex-col z-30 shadow-2xl">
        <div class="h-24 flex items-center px-6 bg-slate-950 border-b border-slate-800">
            <div class="bg-red-600 text-white p-2 rounded transform -skew-x-12 mr-3 shadow-lg">
                <span class="font-condensed font-bold text-2xl italic px-1 skew-x-12">FM</span>
            </div>
            <div>
                <h1 class="text-2xl font-black tracking-tight uppercase font-condensed">Negotiator</h1>
                <p class="text-[10px] text-slate-400 font-bold uppercase tracking-widest">Suite Commerciale</p>
            </div>
        </div>

        <div class="p-6 overflow-y-auto custom-scrollbar">
            <div class="text-xs font-bold text-slate-500 uppercase tracking-wider mb-4">Menu Principal</div>
            <nav class="space-y-3">
                <button onclick="switchView('discovery')" id="nav-discovery" class="nav-item w-full flex items-center gap-4 px-4 py-4 text-sm font-bold text-slate-300 rounded-r-lg hover:bg-slate-800 hover:text-white text-left group transition-all active">
                    <div class="bg-slate-800 p-2.5 rounded-lg group-hover:bg-red-600 transition-colors">
                        <i data-lucide="compass" class="w-5 h-5"></i>
                    </div>
                    <div>
                        <span class="block text-base">Guide d'Entretien</span>
                        <span class="text-[10px] font-normal text-slate-500 block group-hover:text-slate-300">Script de D√©couverte</span>
                    </div>
                </button>

                <button onclick="switchView('objections')" id="nav-objections" class="nav-item w-full flex items-center gap-4 px-4 py-4 text-sm font-bold text-slate-300 rounded-r-lg hover:bg-slate-800 hover:text-white text-left group transition-all">
                    <div class="bg-slate-800 p-2.5 rounded-lg group-hover:bg-red-600 transition-colors">
                        <i data-lucide="message-square-warning" class="w-5 h-5"></i>
                    </div>
                    <div>
                        <span class="block text-base">Argumentaire (Obj.)</span>
                        <span class="text-[10px] font-normal text-slate-500 block group-hover:text-slate-300">Base de R√©ponses (30)</span>
                    </div>
                </button>
                
                <button onclick="switchView('catalog')" id="nav-catalog" class="nav-item w-full flex items-center gap-4 px-4 py-4 text-sm font-bold text-slate-300 rounded-r-lg hover:bg-slate-800 hover:text-white text-left group transition-all">
                    <div class="bg-slate-800 p-2.5 rounded-lg group-hover:bg-red-600 transition-colors">
                        <i data-lucide="package-search" class="w-5 h-5"></i>
                    </div>
                    <div>
                        <span class="block text-base">Catalogue & Args</span>
                        <span class="text-[10px] font-normal text-slate-500 block group-hover:text-slate-300">Fiches Produits (10+)</span>
                    </div>
                </button>

                <button onclick="switchView('prices')" id="nav-prices" class="nav-item w-full flex items-center gap-4 px-4 py-4 text-sm font-bold text-slate-300 rounded-r-lg hover:bg-slate-800 hover:text-white text-left group transition-all">
                    <div class="bg-slate-800 p-2.5 rounded-lg group-hover:bg-red-600 transition-colors">
                        <i data-lucide="tag" class="w-5 h-5"></i>
                    </div>
                    <div>
                        <span class="block text-base">Tarifs & Cond.</span>
                        <span class="text-[10px] font-normal text-slate-500 block group-hover:text-slate-300">Grille Tarifaire</span>
                    </div>
                </button>

                <button onclick="switchView('quote')" id="nav-quote" class="nav-item w-full flex items-center gap-4 px-4 py-4 text-sm font-bold text-slate-300 rounded-r-lg hover:bg-slate-800 hover:text-white text-left group transition-all">
                    <div class="bg-slate-800 p-2.5 rounded-lg group-hover:bg-red-600 transition-colors">
                        <i data-lucide="calculator" class="w-5 h-5"></i>
                    </div>
                    <div>
                        <span class="block text-base">Simulateur Devis</span>
                        <span class="text-[10px] font-normal text-slate-500 block group-hover:text-slate-300">Chiffrage Rapide</span>
                    </div>
                </button>

                <button onclick="switchView('history')" id="nav-history" class="nav-item w-full flex items-center gap-4 px-4 py-4 text-sm font-bold text-slate-300 rounded-r-lg hover:bg-slate-800 hover:text-white text-left group transition-all">
                    <div class="bg-slate-800 p-2.5 rounded-lg group-hover:bg-red-600 transition-colors">
                        <i data-lucide="landmark" class="w-5 h-5"></i>
                    </div>
                    <div>
                        <span class="block text-base">L'Entreprise</span>
                        <span class="text-[10px] font-normal text-slate-500 block group-hover:text-slate-300">Histoire & Valeurs</span>
                    </div>
                </button>

                <!-- NEW BUTTON CALCULATOR -->
                <button onclick="switchView('calculator')" id="nav-calculator" class="nav-item w-full flex items-center gap-4 px-4 py-4 text-sm font-bold text-slate-300 rounded-r-lg hover:bg-slate-800 hover:text-white text-left group transition-all">
                    <div class="bg-slate-800 p-2.5 rounded-lg group-hover:bg-red-600 transition-colors">
                        <i data-lucide="percent" class="w-5 h-5"></i>
                    </div>
                    <div>
                        <span class="block text-base">Calcul de Marge</span>
                        <span class="text-[10px] font-normal text-slate-500 block group-hover:text-slate-300">Outil Rentabilit√©</span>
                    </div>
                </button>
            </nav>
        </div>

        <div class="mt-auto p-6 bg-slate-950 border-t border-slate-800">
            <div class="flex items-center gap-3">
                <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                <p class="text-xs text-slate-400 font-medium">Base v6.5 - Tarifs √† jour</p>
            </div>
        </div>
    </aside>

    <!-- CONTENT -->
    <div class="flex-grow flex flex-col h-full overflow-hidden relative bg-slate-50">
        
        <!-- TOP BAR -->
        <header class="h-20 bg-white border-b border-slate-200 flex items-center justify-between px-8 flex-shrink-0 z-20 shadow-sm">
            <div>
                <h2 id="page-title" class="text-2xl font-condensed font-bold text-slate-800">Guide d'Entretien</h2>
                <p id="page-subtitle" class="text-xs text-slate-500 font-medium flex items-center gap-1">
                    Structure de l'√©change commercial
                </p>
            </div>
            
            <div id="search-container" class="hidden md:flex items-center bg-slate-100 rounded-full px-5 py-2.5 border border-slate-200 w-96 focus-within:ring-2 ring-red-500 focus-within:bg-white transition-all shadow-inner invisible">
                <i data-lucide="search" class="text-slate-400 mr-3 w-5 h-5"></i>
                <input 
                    type="text" 
                    id="searchInput"
                    placeholder="Rechercher un produit..."
                    class="bg-transparent border-none outline-none text-sm w-full placeholder-slate-400 font-medium text-slate-700"
                />
            </div>
        </header>

        <!-- MAIN SCROLL AREA -->
        <main class="flex-grow overflow-y-auto custom-scrollbar p-0 relative">
            
            <!-- VIEW 1: DISCOVERY (GUIDE) -->
            <div id="view-discovery" class="max-w-5xl mx-auto pb-32 p-8 fade-in">
                
                <div class="bg-white rounded-2xl p-8 mb-8 shadow-sm border-l-8 border-red-600 relative overflow-hidden">
                    <div class="relative z-10">
                        <h2 class="text-3xl font-condensed font-black text-slate-900 mb-3">Script de D√©couverte Strat√©gique</h2>
                        <p class="text-slate-600 text-lg">Ce guide est con√ßu pour structurer l'entretien avec les acheteurs <strong>Leroy Merlin</strong> et <strong>Castorama</strong>. Il suit une logique d'entonnoir pour aboutir au closing.</p>
                    </div>
                </div>

                <div id="discovery-content" class="space-y-8">
                    <!-- Questions injected by JS -->
                </div>
            </div>

            <!-- VIEW 2: OBJECTIONS -->
            <div id="view-objections" class="hidden fade-in h-full flex flex-col">
                <!-- Filters & Search Toolbar (Sticky) -->
                <div class="bg-white border-b border-slate-200 p-6 sticky top-0 z-10 shadow-sm">
                    <div class="max-w-5xl mx-auto space-y-4">
                        <!-- Search -->
                        <div class="relative">
                            <i data-lucide="search" class="absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-5 h-5"></i>
                            <input type="text" id="objectionSearchInput" class="w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all shadow-inner text-sm font-medium" placeholder="Rechercher une objection (ex: 'cher', 'MDD', 'transport', 'concurrent')...">
                        </div>
                        
                        <!-- Filters -->
                        <div class="flex flex-wrap gap-2" id="objection-filters-container">
                            <button onclick="filterObjections('all')" class="theme-filter-btn active px-4 py-2 rounded-full text-xs font-bold border border-slate-200 bg-white text-slate-600 hover:bg-slate-50 transition-all flex items-center gap-2" id="filter-all">
                                Tout voir
                            </button>
                            <button onclick="filterObjections('PRIX & RENTABILIT√â')" class="theme-filter-btn px-4 py-2 rounded-full text-xs font-bold border border-green-200 bg-green-50 text-green-700 hover:bg-green-100 transition-all flex items-center gap-2" id="filter-prix">
                                <i data-lucide="euro" class="w-3 h-3"></i> Prix & Rentabilit√©
                            </button>
                            <button onclick="filterObjections('PRODUIT & TECHNIQUE')" class="theme-filter-btn px-4 py-2 rounded-full text-xs font-bold border border-blue-200 bg-blue-50 text-blue-700 hover:bg-blue-100 transition-all flex items-center gap-2" id="filter-tech">
                                <i data-lucide="flask-conical" class="w-3 h-3"></i> Produit & Technique
                            </button>
                            <button onclick="filterObjections('LOGISTIQUE & APPROVISIONNEMENT')" class="theme-filter-btn px-4 py-2 rounded-full text-xs font-bold border border-orange-200 bg-orange-50 text-orange-700 hover:bg-orange-100 transition-all flex items-center gap-2" id="filter-log">
                                <i data-lucide="truck" class="w-3 h-3"></i> Logistique
                            </button>
                            <button onclick="filterObjections('MARQUE & MARKETING')" class="theme-filter-btn px-4 py-2 rounded-full text-xs font-bold border border-purple-200 bg-purple-50 text-purple-700 hover:bg-purple-100 transition-all flex items-center gap-2" id="filter-mark">
                                <i data-lucide="megaphone" class="w-3 h-3"></i> Marketing
                            </button>
                            <button onclick="filterObjections('STRAT√âGIE & CONCURRENCE')" class="theme-filter-btn px-4 py-2 rounded-full text-xs font-bold border border-red-200 bg-red-50 text-red-700 hover:bg-red-100 transition-all flex items-center gap-2" id="filter-strat">
                                <i data-lucide="swords" class="w-3 h-3"></i> Strat√©gie
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Objections List -->
                <div id="objectionsList" class="flex-1 overflow-y-auto custom-scrollbar p-6 md:p-8 space-y-4 max-w-5xl mx-auto w-full pb-32">
                    <!-- Injected by JS -->
                </div>
            </div>

            <!-- VIEW 3: CATALOG -->
            <div id="view-catalog" class="hidden fade-in pb-20 p-8">
                
                <!-- Filters -->
                <div class="mb-8 sticky top-0 z-30 bg-slate-50/95 backdrop-blur py-4 border-b border-slate-200 -mx-8 px-8 shadow-sm">
                    <div id="universFilters" class="flex flex-wrap gap-3">
                        <!-- Filters injected by JS -->
                    </div>
                </div>

                <!-- Grid -->
                <div id="productsGrid" class="grid grid-cols-1 lg:grid-cols-2 2xl:grid-cols-3 gap-8">
                    <!-- Products injected by JS -->
                </div>

                <!-- Empty State -->
                <div id="emptyState" class="hidden flex-col items-center justify-center py-32 text-slate-400 border-4 border-dashed border-slate-200 rounded-3xl bg-white">
                    <i data-lucide="search-x" class="w-24 h-24 mb-6 opacity-20 text-slate-900"></i>
                    <p class="text-2xl font-bold text-slate-600 mb-2">Aucun r√©sultat trouv√©</p>
                    <button onclick="resetSearch()" class="text-red-600 font-bold hover:underline bg-red-50 px-6 py-3 rounded-xl transition-colors">Tout r√©initialiser</button>
                </div>
            </div>

            <!-- VIEW 4: PRICES (MISE √Ä JOUR SELON PDF) -->
            <div id="view-prices" class="hidden fade-in pb-20 p-8">
                <div class="max-w-5xl mx-auto space-y-8">
                    
                    <!-- Header Global -->
                    <div class="bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden">
                        <div class="p-6 border-b border-slate-100 bg-slate-50 flex justify-between items-center">
                            <div>
                                <h3 class="text-xl font-condensed font-bold text-slate-800">Grille Tarifaire Produits</h3>
                                <p class="text-xs text-slate-500">Mise √† jour 2024 - Tarifs Publics HT (400ml sauf indication)</p>
                            </div>
                            <div class="bg-blue-100 text-blue-800 text-xs font-bold px-3 py-1 rounded-full border border-blue-200">
                                Prix Fixes
                            </div>
                        </div>
                    </div>

                    <!-- 1. Gamme D√âCO / MAISON : D√©coration & Industrie -->
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                        <div class="bg-slate-100 px-6 py-3 border-b border-slate-200">
                            <h4 class="font-bold text-slate-700 font-condensed uppercase tracking-wide">1. Gamme D√âCO / MAISON : D√©coration & Industrie</h4>
                        </div>
                        <table class="w-full text-left text-sm">
                            <tbody class="divide-y divide-slate-100">
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">Email alkyde FM Spray DECO <span class="text-xs text-slate-400 block font-normal">Couleurs RAL sp√©cifiques (1013, 1016, 2004, 4005, 9005, 9016...)</span></td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">2.20 ‚Ç¨</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">Formulation RAL Acrylique (HS) <span class="text-xs text-slate-400 block font-normal">Pour besoins industriels</span></td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">2.97 ‚Ç¨</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- 2. Gamme D√âCO / MAISON : R√©novation Sp√©cifique -->
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                        <div class="bg-slate-100 px-6 py-3 border-b border-slate-200">
                            <h4 class="font-bold text-slate-700 font-condensed uppercase tracking-wide">2. Gamme D√âCO / MAISON : R√©novation Sp√©cifique</h4>
                        </div>
                        <table class="w-full text-left text-sm">
                            <tbody class="divide-y divide-slate-100">
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">Peinture √âLECTROM√âNAGER <span class="text-xs text-slate-400 block font-normal">Appareils m√©nagers blancs</span></td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">2.24 ‚Ç¨</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">BLANC ANTITACHES <span class="text-xs text-slate-400 block font-normal">Isolation Blanco Antimanchas</span></td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">2.31 ‚Ç¨</td>
                                </tr>
                                <tr class="hover:bg-slate-50 text-slate-400 bg-slate-50/50">
                                    <td class="px-6 py-3 italic">Peinture pour Radiateurs</td>
                                    <td class="px-6 py-3 text-right italic">-</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- 3. Gamme D√âCO / MAISON : Signalisation -->
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                        <div class="bg-slate-100 px-6 py-3 border-b border-slate-200">
                            <h4 class="font-bold text-slate-700 font-condensed uppercase tracking-wide">3. Gamme D√âCO / MAISON : Signalisation</h4>
                        </div>
                        <table class="w-full text-left text-sm">
                            <tbody class="divide-y divide-slate-100">
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">Peinture Ornamentation DOR√âE</td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">2.71 ‚Ç¨</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">Peinture Ornamentation ARGENTEE</td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">2.42 ‚Ç¨</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">Vernis acrylique WORK (Fluo) <span class="text-xs text-slate-400 block font-normal">Pigments Fluorescents (RAL 1026, 2005, 3026...)</span></td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">2.97 ‚Ç¨</td>
                                </tr>
                                <tr class="hover:bg-slate-50 text-slate-400 bg-slate-50/50">
                                    <td class="px-6 py-3 italic">Luminiscent (Brille 6h)</td>
                                    <td class="px-6 py-3 text-right italic">-</td>
                                </tr>
                                <tr class="hover:bg-slate-50 text-slate-400 bg-slate-50/50">
                                    <td class="px-6 py-3 italic">Reflectivo (Billes de verre)</td>
                                    <td class="px-6 py-3 text-right italic">-</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- 4. Gamme TECHNIQUE : Galvanisation (Zinc) -->
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                        <div class="bg-slate-100 px-6 py-3 border-b border-slate-200">
                            <h4 class="font-bold text-slate-700 font-condensed uppercase tracking-wide">4. Gamme TECHNIQUE : Galvanisation (Zinc)</h4>
                        </div>
                        <table class="w-full text-left text-sm">
                            <tbody class="divide-y divide-slate-100">
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">ZINC BRILLANTE</td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">2.90 ‚Ç¨</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">ZINC MATE</td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">2.71 ‚Ç¨</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- 5. Gamme TECHNIQUE : M√©tallique -->
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                        <div class="bg-slate-100 px-6 py-3 border-b border-slate-200">
                            <h4 class="font-bold text-slate-700 font-condensed uppercase tracking-wide">5. Gamme TECHNIQUE : M√©tallique</h4>
                        </div>
                        <table class="w-full text-left text-sm">
                            <tbody class="divide-y divide-slate-100">
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">Acero Efecto Inox</td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">3.27 ‚Ç¨</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">Inox 18/10</td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">3.41 ‚Ç¨</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">Cobre Galvanico (Cuivre)</td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">3.48 ‚Ç¨</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">Plata Galv√°nica (Argent)</td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">2.57 ‚Ç¨</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- 6. Gamme TECHNIQUE : Haute Temp√©rature -->
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                        <div class="bg-slate-100 px-6 py-3 border-b border-slate-200">
                            <h4 class="font-bold text-slate-700 font-condensed uppercase tracking-wide">6. Gamme TECHNIQUE : Haute Temp√©rature</h4>
                        </div>
                        <table class="w-full text-left text-sm">
                            <tbody class="divide-y divide-slate-100">
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">Noir 600¬∞ SATIN√âE</td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">4.07 ‚Ç¨</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">Gamme 600¬∞ couleurs vives <span class="text-xs text-slate-400 block font-normal">Rouge, Jaune, Bleu, Gris, Blanc, Argent√©...</span></td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">3.70 - 5.08 ‚Ç¨</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- 7. Gamme TECHNIQUE : Automobile (Esth√©tique) -->
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                        <div class="bg-slate-100 px-6 py-3 border-b border-slate-200">
                            <h4 class="font-bold text-slate-700 font-condensed uppercase tracking-wide">7. Gamme TECHNIQUE : Automobile (Esth√©tique)</h4>
                        </div>
                        <table class="w-full text-left text-sm">
                            <tbody class="divide-y divide-slate-100">
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">Peintures PAA (Couleurs Auto) <span class="text-xs text-slate-400 block font-normal">Noir (Brill/Mat/Sat), Blanc Brillant...</span></td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">2.97 ‚Ç¨</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">Peinture "JANTES" (Argent)</td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">2.69 ‚Ç¨</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">Peinture "JANTES DOREE"</td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">2.85 ‚Ç¨</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">VERNIS AUTO (Bi-Capa) <span class="text-xs text-slate-400 block font-normal">Brillant / Satin√© / Mat</span></td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">2.97 ‚Ç¨</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- 8. Gamme TECHNIQUE : Automobile (R√©paration) -->
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                        <div class="bg-slate-100 px-6 py-3 border-b border-slate-200">
                            <h4 class="font-bold text-slate-700 font-condensed uppercase tracking-wide">8. Gamme TECHNIQUE : Automobile (R√©paration)</h4>
                        </div>
                        <table class="w-full text-left text-sm">
                            <tbody class="divide-y divide-slate-100">
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">APPR√âT AUTO FORTE √âPAISSEUR</td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">2.97 ‚Ç¨</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">APPRET PLASTIQUE AUTO</td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">2.97 ‚Ç¨</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">APPRET GRIS / BLANC / ROUGE AUTO</td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">3.09 ‚Ç¨</td>
                                </tr>
                                <tr class="hover:bg-slate-50 text-slate-400 bg-slate-50/50">
                                    <td class="px-6 py-3 italic">Epoxi 2K (Anticorrosion)</td>
                                    <td class="px-6 py-3 text-right italic">-</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- 9. Gamme TECHNIQUE : Agricole & TP -->
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                        <div class="bg-slate-100 px-6 py-3 border-b border-slate-200">
                            <h4 class="font-bold text-slate-700 font-condensed uppercase tracking-wide">9. Gamme TECHNIQUE : Agricole & TP</h4>
                        </div>
                        <table class="w-full text-left text-sm">
                            <tbody class="divide-y divide-slate-100">
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">AUTO AGRICOLE (Couleurs Constructeur)</td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">2.97 ‚Ç¨</td>
                                </tr>
                                <tr class="hover:bg-slate-50 text-slate-400 bg-slate-50/50">
                                    <td class="px-6 py-3 italic">IDEO TP (Chantier Fluo)</td>
                                    <td class="px-6 py-3 text-right italic">Nous consulter</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- 10. MAINTENANCE & LUBRIFIANTS -->
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                        <div class="bg-slate-100 px-6 py-3 border-b border-slate-200">
                            <h4 class="font-bold text-slate-700 font-condensed uppercase tracking-wide">10, 11 & 12. Gammes MAINTENANCE & INNOVATIONS</h4>
                        </div>
                        <table class="w-full text-left text-sm">
                            <tbody class="divide-y divide-slate-100">
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">DEGRIPPANT RELAXEX</td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">1.85 ‚Ç¨</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">TX-2-DIELECTRIQUE (Anti-humidit√©)</td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">2.19 ‚Ç¨</td>
                                </tr>
                                <tr class="hover:bg-slate-50">
                                    <td class="px-6 py-3 font-medium">GRAISSE POUR CHA√éNE (T√©flon)</td>
                                    <td class="px-6 py-3 text-right font-bold text-slate-800">2.24 ‚Ç¨</td>
                                </tr>
                                <tr class="hover:bg-slate-50 text-slate-400 bg-slate-50/50">
                                    <td class="px-6 py-3 italic">85 GLADIO (Nettoyant Moisissure)</td>
                                    <td class="px-6 py-3 text-right italic">-</td>
                                </tr>
                                <tr class="hover:bg-slate-50 text-slate-400 bg-slate-50/50">
                                    <td class="px-6 py-3 italic">Antid√©rapant (Vernis / Peinture)</td>
                                    <td class="px-6 py-3 text-right italic">-</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                </div>
            </div>

            <!-- VIEW 5: QUOTE GENERATOR -->
            <div id="view-quote" class="hidden fade-in pb-20 p-8">
                <div class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-8">
                    
                    <!-- Selector Column -->
                    <div class="lg:col-span-1 space-y-6">
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                            <h3 class="text-lg font-condensed font-bold text-slate-800 mb-4 border-b pb-2">Ajouter un Produit</h3>
                            
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Produit</label>
                                    <select id="quote-product-select" class="w-full p-2 bg-slate-50 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-red-500 focus:border-red-500 outline-none">
                                        <option value="">S√©lectionner...</option>
                                        <!-- Populated by JS -->
                                    </select>
                                </div>
                                
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Quantit√© (UVC)</label>
                                        <input type="number" id="quote-qty" value="6" min="1" class="w-full p-2 bg-slate-50 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-red-500 outline-none">
                                    </div>
                                    <div>
                                        <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Prix Tarif (‚Ç¨)</label>
                                        <input type="number" id="quote-price" value="0.00" step="0.01" class="w-full p-2 bg-slate-50 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-red-500 outline-none">
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-xs font-bold text-slate-500 uppercase mb-1">Remise N√©goci√©e (%)</label>
                                    <input type="number" id="quote-discount" value="0" min="0" max="100" class="w-full p-2 bg-slate-50 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-red-500 outline-none">
                                </div>

                                <button onclick="addToQuote()" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 rounded-lg transition-colors flex items-center justify-center gap-2 shadow-md">
                                    <i data-lucide="plus-circle" class="w-5 h-5"></i> Ajouter au Devis
                                </button>
                            </div>
                        </div>

                        <div class="bg-blue-50 p-4 rounded-xl border border-blue-200">
                            <h4 class="text-sm font-bold text-blue-800 mb-2 flex items-center gap-2"><i data-lucide="info" class="w-4 h-4"></i> Info Logistique</h4>
                            <p class="text-xs text-blue-700">Minimum de commande : 1 Carton (6 UVC).<br>Frais de port : Franco √† 400‚Ç¨ HT.</p>
                        </div>
                    </div>

                    <!-- Table Column -->
                    <div class="lg:col-span-2">
                        <div class="bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden">
                            <div class="p-6 border-b border-slate-100 bg-slate-50 flex justify-between items-center">
                                <div>
                                    <h3 class="text-xl font-condensed font-bold text-slate-800">Simulation de Commande</h3>
                                    <p class="text-xs text-slate-500">Brouillon N√©gociation</p>
                                </div>
                                <button onclick="printQuote()" class="text-slate-500 hover:text-slate-800 transition-colors p-2">
                                    <i data-lucide="printer" class="w-5 h-5"></i>
                                </button>
                            </div>
                            
                            <div class="overflow-x-auto">
                                <table class="w-full text-left text-sm">
                                    <thead class="bg-slate-100 text-slate-500 uppercase font-bold text-xs">
                                        <tr>
                                            <th class="px-6 py-3">R√©f / Produit</th>
                                            <th class="px-6 py-3 text-center">Qt√©</th>
                                            <th class="px-6 py-3 text-right">Prix Brut</th>
                                            <th class="px-6 py-3 text-right">Remise</th>
                                            <th class="px-6 py-3 text-right">Total HT</th>
                                            <th class="px-6 py-3"></th>
                                        </tr>
                                    </thead>
                                    <tbody id="quote-table-body" class="divide-y divide-slate-100">
                                        <!-- Rows injected by JS -->
                                        <tr id="empty-row">
                                            <td colspan="6" class="px-6 py-12 text-center text-slate-400 italic">Aucun produit ajout√©</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div class="bg-slate-50 p-6 border-t border-slate-200">
                                <div class="flex justify-end">
                                    <div class="w-64 space-y-2">
                                        <div class="flex justify-between text-slate-600">
                                            <span>Total Brut HT</span>
                                            <span id="total-gross" class="font-medium">0.00 ‚Ç¨</span>
                                        </div>
                                        <div class="flex justify-between text-slate-600">
                                            <span>Total Remise</span>
                                            <span id="total-discount" class="font-medium text-green-600">-0.00 ‚Ç¨</span>
                                        </div>
                                        <div class="h-px bg-slate-300 my-2"></div>
                                        <div class="flex justify-between text-lg font-black text-slate-900">
                                            <span>NET √Ä PAYER</span>
                                            <span id="total-net">0.00 ‚Ç¨</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- VIEW 6: HISTORY -->
            <div id="view-history" class="hidden fade-in pb-20 p-8">
                <div class="max-w-4xl mx-auto space-y-8">
                    <!-- Header Image/Card -->
                    <div class="bg-white rounded-2xl p-8 shadow-sm border-l-8 border-slate-900 relative overflow-hidden">
                        <h2 class="text-3xl font-condensed font-black text-slate-900 mb-3">üè≠ Pr√©sentation de l'Entreprise FM Spray</h2>
                        <p class="text-slate-600 text-lg">L'entreprise FM Spray est un fabricant espagnol sp√©cialis√© dans la production d'une gamme compl√®te d'a√©rosols pour les professionnels (peinture, r√©paration, maintenance technique).</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- I. Localisation -->
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                            <div class="flex items-center gap-3 mb-4">
                                <div class="p-2 bg-red-100 text-red-600 rounded-lg"><i data-lucide="map-pin" class="w-6 h-6"></i></div>
                                <h3 class="text-xl font-condensed font-bold text-slate-800">I. Localisation & Histoire</h3>
                            </div>
                            <ul class="space-y-3 text-sm text-slate-600">
                                <li><strong class="text-slate-900">Localisation :</strong> Bas√©e √† Hernani (Pays Basque), √† c√¥t√© de Saint-S√©bastien. Proximit√© imm√©diate avec la fronti√®re fran√ßaise.</li>
                                <li><strong class="text-slate-900">Fabricant Historique :</strong> Production depuis 1972. Plus de 50 ans d'exp√©rience.</li>
                                <li><strong class="text-slate-900">Mission :</strong> Fournir des solutions techniques performantes avec une qualit√© maximale et un service client B2B optimal.</li>
                            </ul>
                        </div>

                        <!-- II. Expertise -->
                        <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                            <div class="flex items-center gap-3 mb-4">
                                <div class="p-2 bg-blue-100 text-blue-600 rounded-lg"><i data-lucide="flask-conical" class="w-6 h-6"></i></div>
                                <h3 class="text-xl font-condensed font-bold text-slate-800">II. Expertise & Gammes</h3>
                            </div>
                            <p class="text-sm text-slate-600 mb-3">Solutions rapides pour l'industrie, l'auto, l'artisanat et la maintenance.</p>
                            <ul class="space-y-3 text-sm text-slate-600">
                                <li><strong class="text-slate-900">Expertise Couleur :</strong> Couleurs d'origine (Auto/Agri) et respect de la norme RAL (+100 teintes).</li>
                                <li><strong class="text-slate-900">Portfolio Large :</strong> Finition (RAL, D√©co), Protection (Zinc, Inox, HT) et R√©paration (Mastics, R√©sines).</li>
                            </ul>
                        </div>
                    </div>

                    <!-- III. Qualit√© -->
                    <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200">
                        <div class="flex items-center gap-3 mb-4">
                            <div class="p-2 bg-green-100 text-green-600 rounded-lg"><i data-lucide="leaf" class="w-6 h-6"></i></div>
                            <h3 class="text-xl font-condensed font-bold text-slate-800">III. Qualit√© & Engagement Environnemental</h3>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div class="text-center p-4 bg-slate-50 rounded-lg">
                                <div class="font-black text-slate-900 mb-1">ISO 9001:2015</div>
                                <p class="text-xs text-slate-500">Certification Qualit√© du processus de fabrication.</p>
                            </div>
                            <div class="text-center p-4 bg-slate-50 rounded-lg">
                                <div class="font-black text-green-600 mb-1">A+ (Air Int√©rieur)</div>
                                <p class="text-xs text-slate-500">√âmissions de COV "pratiquement nulles" pour la d√©coration.</p>
                            </div>
                            <div class="text-center p-4 bg-slate-50 rounded-lg">
                                <div class="font-black text-slate-900 mb-1">ECOEMBES</div>
                                <p class="text-xs text-slate-500">Engagement dans l'√©conomie circulaire et durable.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- VIEW 7: CALCULATOR (NEW) -->
            <div id="view-calculator" class="hidden fade-in pb-20 p-8">
                <div class="max-w-lg mx-auto">
                    
                    <div class="bg-white rounded-2xl shadow-xl border border-slate-200 overflow-hidden">
                        <!-- Header -->
                        <div class="bg-slate-900 p-6 text-white text-center relative overflow-hidden">
                            <div class="absolute top-0 left-0 w-full h-full opacity-10 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]"></div>
                            <h2 class="text-2xl font-condensed font-black uppercase tracking-wider relative z-10">Calculateur de Marge</h2>
                            <p class="text-xs text-slate-400 font-bold uppercase tracking-widest relative z-10">Outil N√©gociation Imm√©diate</p>
                        </div>

                        <div class="p-8 space-y-8">
                            
                            <!-- Inputs Section -->
                            <div class="space-y-6">
                                <div>
                                    <label class="block text-xs font-bold text-slate-500 uppercase mb-2">1. Votre Prix d'Achat (Unitaire HT)</label>
                                    <div class="relative">
                                        <span class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold">‚Ç¨</span>
                                        <input type="number" id="calc-pa" placeholder="0.00" step="0.01" class="calc-input w-full pl-10 pr-4 py-4 bg-slate-50 border border-slate-200 rounded-xl text-xl font-bold text-slate-900 placeholder-slate-300 transition-all text-center">
                                    </div>
                                </div>

                                <div>
                                    <label class="block text-xs font-bold text-slate-500 uppercase mb-2">2. Marge Souhait√©e (%)</label>
                                    <div class="relative">
                                        <input type="number" id="calc-margin" placeholder="30" step="1" class="calc-input w-full px-4 py-4 bg-slate-50 border border-slate-200 rounded-xl text-xl font-bold text-red-600 placeholder-red-200 transition-all text-center">
                                        <span class="absolute right-8 top-1/2 -translate-y-1/2 text-red-300 font-bold">%</span>
                                    </div>
                                    <div class="flex justify-center gap-2 mt-2">
                                        <button onclick="setMargin(20)" class="text-xs bg-slate-100 hover:bg-slate-200 text-slate-600 font-bold px-3 py-1 rounded-full transition-colors">20%</button>
                                        <button onclick="setMargin(30)" class="text-xs bg-slate-100 hover:bg-slate-200 text-slate-600 font-bold px-3 py-1 rounded-full transition-colors">30%</button>
                                        <button onclick="setMargin(40)" class="text-xs bg-slate-100 hover:bg-slate-200 text-slate-600 font-bold px-3 py-1 rounded-full transition-colors">40%</button>
                                        <button onclick="setMargin(50)" class="text-xs bg-slate-100 hover:bg-slate-200 text-slate-600 font-bold px-3 py-1 rounded-full transition-colors">50%</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Divider -->
                            <div class="relative h-px bg-slate-200">
                                <div class="absolute left-1/2 -translate-x-1/2 -top-3 bg-white px-2">
                                    <div class="bg-slate-100 p-1 rounded-full text-slate-400"><i data-lucide="arrow-down" class="w-4 h-4"></i></div>
                                </div>
                            </div>

                            <!-- Results Section -->
                            <div class="bg-slate-50 rounded-xl p-6 border border-slate-200 space-y-4">
                                <div class="text-center">
                                    <p class="text-xs font-bold text-slate-500 uppercase mb-1">Prix de Vente Conseill√© (HT)</p>
                                    <div id="res-pv" class="text-4xl font-black text-slate-900 tracking-tight">0.00 ‚Ç¨</div>
                                    <!-- NOUVEAU : PRIX TTC -->
                                    <div class="mt-2 flex items-center justify-center gap-2">
                                        <span class="text-xs font-bold text-slate-400 uppercase">TTC (20%) :</span>
                                        <span id="res-pv-ttc" class="text-sm font-bold text-slate-600">0.00 ‚Ç¨</span>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-2 gap-4 pt-4 border-t border-slate-200">
                                    <div class="text-center">
                                        <p class="text-[10px] font-bold text-slate-400 uppercase mb-1">Marge Valeur</p>
                                        <div id="res-val" class="text-lg font-bold text-green-600">+0.00 ‚Ç¨</div>
                                    </div>
                                    <div class="text-center">
                                        <p class="text-[10px] font-bold text-slate-400 uppercase mb-1">Coefficient</p>
                                        <div id="res-coef" class="text-lg font-bold text-blue-600">x 0.00</div>
                                    </div>
                                </div>
                            </div>
                            
                            <p class="text-[10px] text-center text-slate-400 italic">
                                *Calcul bas√© sur la marge commerciale (Taux de Marque) :<br> PV = PA / (1 - TauxMarge).
                            </p>

                        </div>
                    </div>

                </div>
            </div>

        </main>
    </div>

    <!-- SCRIPT -->
    <script>
        // --- DONN√âES GUIDES D'ENTRETIEN ---
        const discoveryQuestions = [
            {
                phase: "PHASE 1 : VISION & TENDANCES",
                subtitle: "L'Ouverture Positive",
                color: "border-purple-500 text-purple-700 bg-purple-50",
                icon: "eye",
                questions: [
                    "Avec votre position de leader (40% de parts de march√©), comment ressentez-vous la dynamique globale de votre secteur en ce moment ?",
                    "Quelles sont les grandes tendances de consommation ou les nouveaux comportements clients (comme le DIY ou le Home Staging) qui tirent votre activit√© vers le haut cette ann√©e ?",
                    "Au-del√† des chiffres, quelle est la vision ou l'ambiance que vous souhaitez donner √† votre rayon Peinture pour les saisons √† venir : plut√¥t une orientation 'D√©co pure' ou 'Expertise technique' ?",
                    "Quelles sont les familles de produits ou les innovations r√©centes qui ont re√ßu le meilleur accueil de la part de vos clients ces derniers mois ?",
                    "Globalement, quels sont les d√©fis passionnants que vous vous √™tes fix√©s pour continuer √† diff√©rencier l'exp√©rience Leroy Merlin de celle des pure-players web ou des discounters ?"
                ]
            },
            {
                phase: "PHASE 2 : L'OFFRE ACTUELLE & LE RAYON",
                subtitle: "L'Analyse",
                color: "border-blue-500 text-blue-700 bg-blue-50",
                icon: "layout-grid",
                questions: [
                    "Comment est structur√© votre lin√©aire a√©rosols aujourd'hui : l'entr√©e se fait-elle par marque, par usage (Tech/D√©co) ou par couleur ?",
                    "Quelle est votre strat√©gie concernant l'√©quilibre entre votre marque propre (Luxens) et les marques nationales ? Cherchez-vous des marques pour couvrir des niches sp√©cifiques ?",
                    "Sur le segment de la peinture technique (Antirouille, Haute Temp√©rature), sentez-vous que vos clients sont de plus en plus exigeants sur la performance professionnelle des produits ?",
                    "Y a-t-il des demandes r√©currentes de vos clients (couleurs sp√©cifiques, usages particuliers) auxquelles vous devez r√©pondre 'non' aujourd'hui faute de r√©f√©rence en rayon ?",
                    "Quelle importance accordez-vous aux certifications (ISO, A+) et √† la RSE pour rassurer vos clients sur la s√©curit√© des produits chimiques en rayon ?"
                ]
            },
            {
                phase: "PHASE 3 : LE PRODUIT & LA TECHNICIT√â",
                subtitle: "Le Ciblage FM Spray",
                color: "border-green-500 text-green-700 bg-green-50",
                icon: "wrench",
                questions: [
                    "Pour la protection des m√©taux, vos clients pros se contentent-ils d'une peinture grise classique, ou avez-vous des demandes pour de la v√©ritable galvanisation √† froid (Zinc pur √† 98%) ?",
                    "Concernant la saisonnalit√© (Po√™les / Barbecues), cherchez-vous √† monter en gamme avec des produits certifi√©s haute r√©sistance (600¬∞C) pour √©viter les retours SAV ?",
                    "Avez-vous identifi√© un besoin au rayon droguerie pour des solutions de nettoyage 'choc' (type anti-moisissures sans effort) qui fid√©lisent le client par leur efficacit√© ?",
                    "Vos gammes actuelles couvrent-elles les besoins de r√©paration automobile sp√©cifiques (jantes, carrosserie, plastiques) ou est-ce un segment que vous souhaitez reconqu√©rir ?",
                    "Sur le march√© de la r√©novation, avez-vous une solution d√©di√©e pour l'√©lectrom√©nager et les radiateurs, ou conseillez-vous une peinture g√©n√©raliste ?"
                ]
            },
            {
                phase: "PHASE 4 : LOGISTIQUE & RENTABILIT√â",
                subtitle: "Le Closing",
                color: "border-orange-500 text-orange-700 bg-orange-50",
                icon: "truck",
                questions: [
                    "Au niveau op√©rationnel, rencontrez-vous des difficult√©s de r√©assort sur les produits de niche √† cause de minimums de commande trop √©lev√©s chez vos fournisseurs actuels ?",
                    "Si vous deviez introduire une nouvelle gamme technique, privil√©giez-vous une int√©gration au fond de rayon ou une mise en avant via des box promotionnels ?",
                    "Quel est le 'prix psychologique' maximum que votre client type est pr√™t √† mettre pour un a√©rosol technique de haute qualit√© ?",
                    "Pour construire notre partenariat, quel niveau de marge (en % ou coefficient) visez-vous imp√©rativement sur cette famille d'accessoires ?",
                    "Si je peux vous garantir une gamme technique exclusive (Zinc/Gladio) qui respecte vos objectifs de marge et r√©sout vos contraintes logistiques, qu'est-ce qui nous emp√™cherait de lancer un test ?"
                ]
            }
        ];

        // --- DONN√âES PRODUITS (10+ ARGUMENTS BIZ) ---
        const productsData = [
            // GROUPE 1: D√âCORATION
            {
                id: 101, univers: 1, fiche: 1, name: "Pintura DECO (Bricolage)", ref: "PDRA",
                tags: ["Bricolage", "D√©co", "Volume", "Eco"],
                kpis: [{label:"Rotation", value:"Max"}, {label:"Prix", value:"Appel"}, {label:"Marge", value:"Volume"}],
                pitch: "L'√©mail alkyde universel petit format. Le produit d'appel parfait pour d√©clencher l'achat d'impulsion sans r√©fl√©chir.",
                techSpecs: [{label:"Base", value:"Alkyde Modifi√©"}, {label:"Format", value:"250ml / 400ml"}, {label:"Valve", value:"Autonettoyante"}],
                techDescription: "Base Alkyde modifi√©e : S√©chage plus rapide qu'un synth√©tique classique mais garde la souplesse et la brillance. Id√©al bois/m√©tal.",
                colors: ["RAL 1013 Marfil (Ivoire)", "RAL 1016 Amarillo (Jaune)", "RAL 3003 Rojo (Rouge)", "RAL 5005 Azul (Bleu)", "RAL 6005 Verde (Vert)", "RAL 9005 Negro (Noir)", "RAL 9010 Blanco (Blanc)", "Oro Rico", "Plata Cromo"],
                businessArgs: [
                    {label:"1. Rotation Stock", value:"Tr√®s Forte", definition:"Le format 250ml tourne 3x plus vite que le 400ml sur les petits projets (retouches)."},
                    {label:"2. Prix Psychologique", value:"< 5‚Ç¨", definition:"Un prix facial bas qui l√®ve tous les freins √† l'achat pour le bricoleur occasionnel."},
                    {label:"3. Couverture Besoin", value:"80/20", definition:"Une gamme resserr√©e sur les 15 RAL qui font 80% du volume national. Pas de stock mort."},
                    {label:"4. Rentabilit√© Lin√©aire", value:"Max", definition:"Le petit diam√®tre permet de doubler le nombre de facings au m√®tre lin√©aire."},
                    {label:"5. Fid√©lisation", value:"Qualit√©", definition:"Le pouvoir couvrant sup√©rieur aux premiers prix import√©s fid√©lise le client."},
                    {label:"6. Compl√©mentarit√©", value:"MDD", definition:"Ne cannibalise pas votre MDD 400ml. C'est une offre compl√©mentaire pour les petits projets."},
                    {label:"7. Polyvalence", value:"Max", definition:"Convient aussi bien au bois, au m√©tal qu'√† la pierre. Simplifie le conseil vendeur."},
                    {label:"8. Marge", value:"Volume", definition:"Produit d'appel id√©al pour g√©n√©rer du trafic dans le rayon peinture."},
                    {label:"9. Logistique", value:"Flexible", definition:"Pas de minimum de commande prohibitif, r√©assort facile."},
                    {label:"10. RSE", value:"A+", definition:"Produit not√© A+ pour les √©missions dans l'air int√©rieur."},
                    {label:"11. Merchandising", value:"Vrac", definition:"Id√©al en bacs √† fouille ou t√™tes de gondole pour l'achat coup de c≈ìur."},
                    {label:"12. Usage", value:"Scolaire", definition:"Format adapt√© aux projets scolaires et loisirs cr√©atifs."}
                ],
                objections: [{objection:"On a d√©j√† une MDD.", response:"Notre 250ml est un compl√©ment d'achat (retouche), pas un concurrent de vos 400ml."}]
            },
            {
                id: 102, univers: 1, fiche: 1, name: "Pintura RAL Acr√≠lica HS", ref: "RAL",
                tags: ["Industrie", "Pro", "Technique", "RAL"],
                kpis: [{label:"Qualit√©", value:"HS Pro"}, {label:"Brillance", value:"Top"}, {label:"Dur√©e", value:"Longue"}],
                pitch: "Ne perdez plus les clients Pros. Une gamme RAL Acrylique 'High Solid' pour l'industrie et la maintenance exigeante.",
                techSpecs: [{label:"Base", value:"Acrylique HS"}, {label:"Extrait", value:"√âlev√©"}, {label:"Norme", value:"DIN"}],
                techDescription: "High Solid = Haut extrait sec. Plus de pigments/r√©sine, moins de solvant. Couvre en 1 passe l√† o√π d'autres en mettent 2.",
                colors: ["RAL 1000 √† 9000 (Nuancier Industriel Complet) - Plus de 50 teintes stock√©es"],
                businessArgs: [
                    {label:"1. Cible B2B", value:"Pro", definition:"Le produit indispensable pour attirer les artisans et la maintenance industrielle."},
                    {label:"2. Panier Moyen", value:"√âlev√©", definition:"Le client pro ach√®te par cartons de 6 pour ses chantiers."},
                    {label:"3. Service", value:"D√©pannage", definition:"Avoir le bon RAL en stock (ex: 7016 Anthracite) sauve le chantier du client."},
                    {label:"4. Marge", value:"Valoris√©e", definition:"Produit technique vendu plus cher que la d√©co standard. Marge en valeur absolue tr√®s int√©ressante."},
                    {label:"5. Productivit√©", value:"Gain", definition:"S√©chage et couvrant express = gain de main d'≈ìuvre pour le pro."},
                    {label:"6. Catalogue", value:"Huge", definition:"Le plus large choix de RAL du march√© disponible en stock."},
                    {label:"7. Cross-Sell", value:"B2B", definition:"Se vend souvent avec des abrasifs et des rubans de masquage pro."},
                    {label:"8. Qualit√© Per√ßue", value:"HS", definition:"L'argument 'High Solid' justifie un prix sup√©rieur et √©vite la comparaison frontale."},
                    {label:"9. Fid√©lit√©", value:"Marque", definition:"Les pros sont fid√®les √† une marque qui couvre bien et ne coule pas."},
                    {label:"10. Conformit√©", value:"Normes", definition:"Respecte les codes couleurs industriels exacts (tuyauterie, s√©curit√©)."},
                    {label:"11. Image", value:"Expert", definition:"Positionne le rayon comme un fournisseur technique s√©rieux."}
                ],
                objections: [{objection:"Trop de r√©f√©rences ?", response:"On cible les 20/30 RAL indispensables en maintenance, pas l'exotique."}]
            },
            {
                id: 103, univers: 1, fiche: 2, name: "Home Staging (Electro/Radiateur)", ref: "PDRA",
                tags: ["R√©novation", "Home Staging", "Cuisine", "Radiateur", "Eco"],
                kpis: [{label:"Temp", value:"130¬∞C"}, {label:"Rendu", value:"Inox/Blanc"}, {label:"Fonction", value:"R√©nover"}],
                pitch: "Surfez sur la vague de la r√©novation. Pourquoi jeter quand on peut repeindre un frigo ou un radiateur pour 10‚Ç¨ ?",
                techSpecs: [{label:"Radiateur", value:"130¬∞C"}, {label:"Electro", value:"Anti-choc"}, {label:"Antimanchas", value:"Isolant"}],
                techDescription: "Radiateur : Additifs anti-jaunissement. Electro : Laque dure r√©sistante aux chocs. Antimanchas : Bloque les remont√©es.",
                colors: ["Blanc Electrom√©nager, Inox Electrom√©nager, Blanc Radiateurs, Blanc Anti-t√¢ches"],
                businessArgs: [
                    {label:"1. Tendance", value:"Pouvoir d'Achat", definition:"En p√©riode d'inflation, r√©nover (15‚Ç¨) co√ªte 20x moins cher que remplacer (300‚Ç¨)."},
                    {label:"2. Panier Projet", value:"Multi", definition:"Produit d√©clencheur d'un projet de r√©novation cuisine/salle de bain."},
                    {label:"3. Diff√©renciation", value:"Expertise", definition:"Peu d'enseignes proposent l'Inox Electrom√©nager ou l'Anti-t√¢ches en spray."},
                    {label:"4. Saisonnalit√©", value:"Hiver", definition:"Le spray Radiateur est un best-seller incontournable d√®s les premiers froids."},
                    {label:"5. D√©pannage", value:"Locatif", definition:"L'Antimanchas est le sauveur des √©tats des lieux de sortie pour les locataires."},
                    {label:"6. RSE", value:"Durabilit√©", definition:"Prolonge la dur√©e de vie des appareils (Anti-gaspillage)."},
                    {label:"7. Marge", value:"Niche", definition:"Produits sp√©cifiques √† forte valeur ajout√©e."},
                    {label:"8. Facilit√©", value:"DIY", definition:"Permet au particulier de r√©ussir une r√©novation pro sans outils."},
                    {label:"9. Exclusivit√©", value:"Offre", definition:"L'Inox Electrom√©nager est un produit rare qui cr√©e la pr√©f√©rence."},
                    {label:"10. Cross-Merch", value:"Cuisine", definition:"Peut √™tre implant√© au rayon Cuisine ou Chauffage en cross-merchandising."},
                    {label:"11. Satisfaction", value:"Avis", definition:"Produits √† effet 'Avant/Apr√®s' qui g√©n√®rent de tr√®s bons avis clients."}
                ],
                objections: [{objection:"√áa tient sur un frigo ?", response:"Oui, formul√© pour r√©sister aux coups et au nettoyage fr√©quent."}]
            },
            {
                id: 104, univers: 1, fiche: 3, name: "Effets & Signal√©tique", ref: "PS",
                tags: ["D√©co", "S√©curit√©", "Visibilit√©"],
                kpis: [{label:"Visibilit√©", value:"S√©cu"}, {label:"Effet", value:"Or/Arg"}, {label:"Tech", value:"Nuit"}],
                pitch: "La s√©curit√© et la f√™te. Du balisage d'entrep√¥t obligatoire √† la d√©coration de No√´l, une gamme qui vit toute l'ann√©e.",
                techSpecs: [{label:"Fluo", value:"Haute Visibilit√©"}, {label:"Luminiscent", value:"Brille 6h"}, {label:"Reflectivo", value:"Billes verre"}],
                techDescription: "Pigments techniques : Fluo (r√©agit aux UV), Phosphorescent (stocke la lumi√®re), R√©tro-r√©fl√©chissant (renvoie la lumi√®re).",
                colors: ["Or Riche, Argent Chrome, Fluo (Jaune/Orange/Rouge/Vert/Bleu), Photoluminescent, Reflechissant"],
                businessArgs: [
                    {label:"1. March√© R√©glementaire", value:"S√©curit√©", definition:"Les entreprises ont l'obligation l√©gale de baliser les zones de danger."},
                    {label:"2. Saisonnalit√©", value:"F√™tes", definition:"Explosion des ventes Or/Argent/Fluo en fin d'ann√©e (No√´l/Halloween)."},
                    {label:"3. Marge", value:"++", definition:"Produits √† tr√®s forte marge unitaire (faible sensibilit√© prix)."},
                    {label:"4. Innovation", value:"Image", definition:"Le spray R√©flechissant positionne votre rayon comme innovant."},
                    {label:"5. Cible Mixte", value:"B2B/B2C", definition:"Vendable au pro (s√©curit√©) comme au particulier (d√©co, v√©lo)."},
                    {label:"6. Achat d'Impulsion", value:"Coup de c≈ìur", definition:"Produits visuels qui d√©clenchent l'achat spontan√©."},
                    {label:"7. Usage", value:"Sport", definition:"Le Reflectivo cible aussi les cyclistes et joggeurs (s√©curit√© urbaine)."},
                    {label:"8. Compl√©mentarit√©", value:"Loisirs", definition:"Lien fort avec le rayon Loisirs Cr√©atifs."},
                    {label:"9. Exclusivit√©", value:"Tech", definition:"Le Reflectivo est rare en rayon GSB."},
                    {label:"10. Rotation", value:"Ponctuelle", definition:"Fortes pointes de ventes saisonni√®res pr√©visibles."},
                    {label:"11. Animation", value:"Th√©√¢tralisation", definition:"Permet de cr√©er des t√™tes de gondole th√©matiques attractives."}
                ],
                objections: [{objection:"Fluo fragile ?", response:"N√©cessite un fond blanc pour un √©clat maximal."}]
            },

            // GROUPE 2: M√âTAL
            {
                id: 201, univers: 2, fiche: 4, name: "Galvanisation (Zinc)", ref: "RGA",
                tags: ["M√©tal", "Protection", "Galva", "Industrie", "Soudure"],
                kpis: [{label:"Zinc", value:"98%"}, {label:"Protect", value:"Cathode"}, {label:"Type", value:"Pro"}],
                pitch: "L'assurance vie du m√©tal. 98% de Zinc pur dans le film sec. C'est une v√©ritable protection cathodique (anode sacrificielle) : m√™me ray√©, le m√©tal ne rouille pas.",
                techSpecs: [{label:"Zinc Mate", value:"98% Zinc"}, {label:"Zinc Brillant", value:"Zn+Alu"}, {label:"Format", value:"400ml/4L"}],
                techDescription: "Protection par anode sacrificielle : en pr√©sence d'eau, c'est le zinc qui s'oxyde pour prot√©ger l'acier. Norme industrielle.",
                colors: ["Zinc Mat (Gris Industriel - Protection Max), Zinc Brillant (Aspect Alu Neuf)"],
                businessArgs: [
                    {label:"1. Indispensable", value:"Pro", definition:"Aucun serrurier, m√©tallier ou chauffagiste ne quitte un chantier sans sa bombe de Galva."},
                    {label:"2. Volume", value:"Consommable", definition:"Ce n'est pas un achat unique, c'est un consommable de chantier √† forte rotation."},
                    {label:"3. Cross-Merchandising", value:"Outil", definition:"√Ä placer imp√©rativement au rayon Outillage/Soudure pour doubler les ventes."},
                    {label:"4. Choix", value:"Double", definition:"Proposer Mat (Protection Max) ET Brillant (Esth√©tique) couvre 100% des besoins."},
                    {label:"5. Format", value:"Industrie", definition:"Disponible en pot de 4L pour les gros chantiers (sur commande). Cr√©dibilise l'offre."},
                    {label:"6. Fid√©lisation", value:"Qualit√©", definition:"La teneur en Zinc √† 98% garantit une protection r√©elle et durable."},
                    {label:"7. Cible", value:"Mixte", definition:"Pro (Soudure) et Particulier (Portail, Goutti√®re)."},
                    {label:"8. Marge", value:"Volume", definition:"Produit de volume √† marge constante."},
                    {label:"9. R√©assort", value:"R√©gulier", definition:"Produit fond de rayon qui ne dort jamais, √©t√© comme hiver."},
                    {label:"10. S√©curit√©", value:"Norme", definition:"Conforme aux exigences de protection cathodique."},
                    {label:"11. Ticket", value:"Additionnel", definition:"S'ajoute syst√©matiquement √† l'achat de profil√©s m√©tal."}
                ],
                objections: [{objection:"Brillant ou Mat ?", response:"Mat = + de Zinc (Protection). Brillant = + Esth√©tique."}]
            },
            {
                id: 202, univers: 2, fiche: 5, name: "Finitions M√©tal Sp√©ciales", ref: "RGA",
                tags: ["M√©tal", "Finition", "Sp√©cifique", "Industrie"],
                kpis: [{label:"Inox", value:"18/10"}, {label:"Cuivre", value:"Conduct"}, {label:"Aspect", value:"Chrome"}],
                pitch: "Des solutions introuvables ailleurs. Inox 18/10 pour l'alimentaire, Cuivre conducteur. La r√©ponse aux moutons √† 5 pattes.",
                techSpecs: [{label:"Inox", value:"Chrome/Nickel"}, {label:"Cuivre", value:"Conducteur"}, {label:"Plata", value:"Laminaire"}],
                techDescription: "Vraies poudres m√©talliques. Inox 18/10 r√©siste aux acides. Cuivre conduit l'√©lectricit√© (soudure par point).",
                colors: ["Inox 18/10, Acier Effet Inox, Argent Galvanique, Cuivre Galvanique"],
                businessArgs: [
                    {label:"1. Diff√©renciation", value:"Totale", definition:"Produits que vos concurrents ne r√©f√©rencent pas. Vous devenez la destination 'Expert'."},
                    {label:"2. Maintenance", value:"Usine", definition:"L'Inox 18/10 est vital pour la maintenance en milieu alimentaire, vinicole ou chimique."},
                    {label:"3. Esth√©tique", value:"Finition", definition:"L'Acier Effet Inox permet de moderniser des objets standards (rampes)."},
                    {label:"4. Marge", value:"Forte", definition:"Le client ne discute pas le prix d'un produit technique qui sauve son chantier."},
                    {label:"5. Service", value:"Solution", definition:"R√©pond √† des probl√®mes techniques pr√©cis (soudure, corrosion acide)."},
                    {label:"6. Cible", value:"Plombier", definition:"Le Cobre est indispensable pour les finitions de tuyauterie cuivre apparentes."},
                    {label:"7. Image", value:"Pro", definition:"Renforce l'image de sp√©cialiste du rayon."},
                    {label:"8. Niche", value:"Rentable", definition:"Faibles volumes mais tr√®s forte marge unitaire."},
                    {label:"9. Exclusivit√©", value:"Offre", definition:"Produit introuvable en GSA."},
                    {label:"10. Innovation", value:"Tech", definition:"Formulations sp√©cifiques haute performance."},
                    {label:"11. Polyvalence", value:"D√©co/Tech", definition:"L'aspect cuivre est aussi tr√®s tendance en d√©co industrielle."}
                ],
                objections: [{objection:"Inox ou Effet Inox ?", response:"Inox 18/10 contient du vrai m√©tal (protection chimique), Effet Inox est une peinture esth√©tique brillante."}]
            },
            {
                id: 203, univers: 2, fiche: 6, name: "Haute Temp√©rature", ref: "PA",
                tags: ["Chaleur", "Technique", "Auto", "Sp√©cifique"],
                kpis: [{label:"Temp", value:"600¬∞C"}, {label:"Gamme", value:"Large"}, {label:"Rendu", value:"Satin"}],
                pitch: "R√©siste au feu sans broncher. La gamme la plus large du march√© : du Noir classique au Rouge Ferrari pour le tuning.",
                techSpecs: [{label:"R√©sistance", value:"600¬∞C"}, {label:"R√©sistance 2", value:"500¬∞C (Ind.)"}, {label:"Base", value:"Silicone"}],
                techDescription: "R√©sines silicones qui vitrifient √† la chaleur (>150¬∞C). Ne p√®lent pas, ne craquent pas sous la dilatation.",
                colors: ["Noir, Argent, Blanc, Rouge, Jaune, Bleu, Gris Anthracite, Vernis HT"],
                businessArgs: [
                    {label:"1. Gamme", value:"Unique", definition:"FM Spray est un des seuls √† proposer Rouge/Jaune/Bleu en Haute Temp√©rature (Tuning)."},
                    {label:"2. Saisonnalit√©", value:"Liss√©e", definition:"Produit '4 Saisons' : Po√™les/Inserts en hiver, Barbecues et Motos en √©t√©."},
                    {label:"3. March√©", value:"Tuning", definition:"Les couleurs vives ciblent sp√©cifiquement les passionn√©s auto (√©triers de freins, moteurs)."},
                    {label:"4. Volume", value:"Noir", definition:"Le Noir 600¬∞ est le produit de fond de rayon incontournable en fumisterie."},
                    {label:"5. Vente Li√©e", value:"Vernis", definition:"Le Vernis HT est un produit additionnel malin pour prot√©ger le m√©tal brut ou les pi√®ces polies."},
                    {label:"6. Cible", value:"Passion", definition:"Touche les passionn√©s de m√©canique et de r√©novation."},
                    {label:"7. S√©curit√©", value:"Norme", definition:"R√©sistance 600¬∞C garantie, √©vite les retours SAV pour cloquage."},
                    {label:"8. Marge", value:"Correcte", definition:"Bon √©quilibre volume/marge sur un produit technique."},
                    {label:"9. Compl√©ment", value:"Chauffage", definition:"√Ä placer aussi au rayon po√™les √† bois / chemin√©es."},
                    {label:"10. Choix", value:"Large", definition:"La plus grande profondeur de gamme du march√©."},
                    {label:"11. Tendance", value:"Gris", definition:"Le Gris Anthracite HT correspond aux nouveaux po√™les designs."}
                ],
                objections: [{objection:"Couleurs r√©sistantes ?", response:"Oui, nous utilisons des pigments inorganiques sp√©cifiques qui ne changent pas de couleur √† la chaleur."}]
            },

            // GROUPE 3: AUTO / AGRI
            {
                id: 301, univers: 3, fiche: 7, name: "Auto & Jantes", ref: "PAA",
                tags: ["Auto", "R√©paration", "Jantes", "Technique"],
                kpis: [{label:"R√©sist.", value:"Essence"}, {label:"Rendu", value:"Carrossier"}, {label:"Jantes", value:"M√©tal"}],
                pitch: "La qualit√© carrossier. R√©siste √† l'essence (argument cl√©) et aux rayures. Pour r√©nover sa voiture avant la revente.",
                techSpecs: [{label:"Base", value:"Acrylique Auto"}, {label:"R√©sist.", value:"Hydrocarbures"}, {label:"Vernis", value:"Bi-couche"}],
                techDescription: "Syst√®me professionnel : Base mate √† vernir ou Brillant direct. R√©sistance chimique sup√©rieure aux sprays d√©co.",
                colors: ["Noir (Brill/Mat), Blanc, Argent Jantes, Or Jantes, Vernis Bi-Capa"],
                businessArgs: [
                    {label:"1. Argument Choc", value:"Essence", definition:"'Ne fond pas avec l'essence'. C'est le seul argument qui compte pour un motard ou un m√©cano."},
                    {label:"2. Valorisation", value:"Revente", definition:"Permet au client de r√©nover des jantes pour vendre sa voiture plus cher. ROI imm√©diat."},
                    {label:"3. Cross-Sell", value:"Syst√®me", definition:"Vendre la Base + le Vernis Bi-Capa. C'est le syst√®me pro, donc une double vente syst√©matique."},
                    {label:"4. March√©", value:"Vaste", definition:"Le parc auto vieillissant favorise la r√©paration DIY √©conomique."},
                    {label:"5. Finitions", value:"Vernis", definition:"Proposer le vernis en Mat/Satin/Brillant permet de matcher toutes les finitions auto modernes."},
                    {label:"6. Cible", value:"Passion", definition:"Client√®le pr√™te √† payer pour la qualit√©."},
                    {label:"7. Marge", value:"Tech", definition:"Produits √† forte valeur ajout√©e."},
                    {label:"8. Exclusivit√©", value:"Jantes", definition:"Le spray Jantes Or/Argent est un best-seller."},
                    {label:"9. Rendu", value:"Pro", definition:"Qualit√© √©quivalente √† une peinture pistolet si bien appliqu√©e."},
                    {label:"10. Gamme", value:"Claire", definition:"Des basiques indispensables (Noir, Blanc, Jantes) sans stock inutile."},
                    {label:"11. Trafic", value:"Jeune", definition:"Attire une client√®le jeune (Tuning/Scooter) en magasin."}
                ],
                objections: [{objection:"Vernis obligatoire ?", response:"Oui sur m√©tallis√© pour la protection UV."}]
            },
            {
                id: 302, univers: 3, fiche: 8, name: "Pr√©paration Carrosserie", ref: "PAA",
                tags: ["Auto", "Pr√©paration", "Technique"],
                kpis: [{label:"Fonction", value:"Appr√™t"}, {label:"Support", value:"Plastique"}, {label:"Type", value:"2K"}],
                pitch: "La base d'un travail r√©ussi. Appr√™ts garnissants, accroche plastique et Epoxi 2K.",
                techSpecs: [{label:"Filler", value:"Garnissant"}, {label:"Plastique", value:"Accroche"}, {label:"Epoxi", value:"2K"}],
                techDescription: "Filler : Comble les rayures. Plastique : Mord le support. Epoxi 2K : Bicomposant chimique ultra-r√©sistant.",
                colors: ["Appr√™t Garnissant Beige, Primaire Plastique Transp., Appr√™t Antirouille, Epoxi 2K Gris"],
                businessArgs: [
                    {label:"1. Expertise", value:"2K", definition:"L'Epoxi 2K positionne votre enseigne comme une vraie alternative aux distributeurs pros."},
                    {label:"2. Indispensable", value:"Plastique", definition:"Impossible de peindre un pare-chocs sans primaire plastique. Vente additionnelle s√ªre."},
                    {label:"3. Volume", value:"Conso", definition:"L'appr√™t garnissant se consomme en quantit√© (plus que la peinture) pour lisser les d√©fauts."},
                    {label:"4. Solution", value:"Compl√®te", definition:"Offrir la cha√Æne compl√®te (Pr√©pa > Peinture > Vernis) rassure le client."},
                    {label:"5. Marge", value:"Tech", definition:"Produits de sp√©cialit√© √† forte marge."},
                    {label:"6. Qualit√©", value:"Pro", definition:"Produits issus de la carrosserie professionnelle, adapt√©s au format spray."},
                    {label:"7. Cible", value:"R√©parateur", definition:"Attire les bricoleurs avertis qui r√©parent eux-m√™mes."},
                    {label:"8. Fid√©lisation", value:"R√©sultat", definition:"Une bonne pr√©paration garantit un bon r√©sultat, donc un client content."},
                    {label:"9. Exclusivit√©", value:"2K", definition:"Technologie rare en rayon grand public."},
                    {label:"10. Cross-Merch", value:"Auto", definition:"√Ä placer avec les mastics, abrasifs et rubans de masquage."},
                    {label:"11. Technique", value:"Revente", definition:"Permet de r√©parer des pi√®ces co√ªteuses au lieu de les changer."}
                ],
                objections: [{objection:"C'est quoi 2K ?", response:"Bicomposant avec durcisseur int√©gr√©."}]
            },
            {
                id: 303, univers: 3, fiche: 9, name: "Agricole & TP", ref: "PAG",
                tags: ["Agricole", "Chantier", "Pro", "Sp√©cifique"],
                kpis: [{label:"Couleur", value:"Origine"}, {label:"Valve", value:"360¬∞"}, {label:"Visibilit√©", value:"Fluo"}],
                pitch: "Les vraies couleurs constructeur. John Deere, CAT, Claas... Et le traceur de chantier 360¬∞ pour le BTP.",
                techSpecs: [{label:"PAG", value:"Brillant Acrylique"}, {label:"IDEO TP", value:"Fluo 360¬∞"}, {label:"S√©chage", value:"Rapide"}],
                techDescription: "Respect strict des codes couleurs machines (retouche invisible). Le traceur TP a une valve sp√©ciale 'toutes positions'.",
                colors: ["John Deere, CAT, Claas, New Holland... + Traceur Fluo TP"],
                businessArgs: [
                    {label:"1. Niche", value:"Agri", definition:"Attire une client√®le rurale et pro qui ne vient pas pour la d√©co."},
                    {label:"2. Volume", value:"TP", definition:"Le traceur de chantier est un consommable pur. Vente par cartons de 12 aux entreprises."},
                    {label:"3. Exclusivit√©", value:"Marque", definition:"Avoir la teinte exacte 'John Deere' ou 'CAT' cr√©e une destination d'achat unique."},
                    {label:"4. Marge", value:"Pro", definition:"Le professionnel ne n√©gocie pas le prix d'un outil de travail."},
                    {label:"5. Revente", value:"Occasion", definition:"Permet de remettre √† neuf le mat√©riel agricole avant revente (+ de valeur)."},
                    {label:"6. Visibilit√©", value:"Chantier", definition:"Le Fluo TP est indispensable pour la s√©curit√© et le marquage temporaire."},
                    {label:"7. Usage", value:"360¬∞", definition:"Valve tous sens pour le marquage au sol sans se baisser."},
                    {label:"8. Cible", value:"BTP", definition:"Fait venir les ma√ßons et TP dans le rayon peinture."},
                    {label:"9. R√©assort", value:"Auto", definition:"Consommation r√©guli√®re sur la zone de chalandise rurale/p√©riurbaine."},
                    {label:"10. Gamme", value:"Large", definition:"Couvre les principales marques de tracteurs et engins."},
                    {label:"11. Service", value:"Proximit√©", definition:"√âvite au pro de commander sur internet avec des frais de port."}
                ],
                objections: [{objection:"Juste pour tracteurs ?", response:"Non, aussi pour TP (Pelles, Grues) et le marquage sol universel (IDEO)."}]
            },

            // GROUPE 4: MAINTENANCE
            {
                id: 501, univers: 4, fiche: 12, name: "85 GLADIO (Nettoyant Choc)", ref: "GL",
                tags: ["Nettoyage", "Star", "D√©g√¢ts", "Opportunit√©"],
                kpis: [{label:"Action", value:"Imm√©diate"}, {label:"Effort", value:"Z√©ro"}, {label:"Usage", value:"Murs"}],
                pitch: "L'effaceur de moisissures. Pulv√©risez, attendez, c'est propre. Sans frotter. Le produit miracle qui bluffe les clients.",
                techSpecs: [{label:"Format", value:"500ml (Spray)"}, {label:"Action", value:"Fongicide"}, {label:"Surface", value:"Murs/Joints"}],
                techDescription: "Formule active concentr√©e qui d√©truit la structure cellulaire des champignons. Action curative et pr√©ventive.",
                colors: ["Incolore (Nettoyant)"],
                businessArgs: [
                    {label:"1. Produit Star", value:"Whaou", definition:"L'effet visuel imm√©diat cr√©e un bouche-√†-oreille puissant et des d√©mos convaincantes."},
                    {label:"2. Probl√®me", value:"Solution", definition:"R√©sout un probl√®me universel et p√©nible (la moisissure) sans aucun effort."},
                    {label:"3. Vente Li√©e", value:"Peinture", definition:"Indispensable pour assainir un mur avant de peindre (sinon la moisissure revient)."},
                    {label:"4. Rentabilit√©", value:"Forte", definition:"Produit chimique de sp√©cialit√© √† forte valeur ajout√©e."},
                    {label:"5. Rotation", value:"Rapide", definition:"S'utilise vite (500ml) et se rach√®te r√©guli√®rement en pr√©vention."},
                    {label:"6. Fid√©lisation", value:"Confiance", definition:"Quand √ßa marche aussi bien, le client revient pour tout le reste."},
                    {label:"7. Usage", value:"Facile", definition:"Spray pr√™t √† l'emploi, pas de dosage, pas de sceau."},
                    {label:"8. Cible", value:"Tout Public", definition:"Concerne tous les foyers (salles de bain, caves, murs humides)."},
                    {label:"9. D√©monstration", value:"Vid√©o", definition:"Id√©al pour une vid√©o de d√©mo en rayon qui stoppe le client."},
                    {label:"10. Efficacit√©", value:"Prouv√©e", definition:"R√©sultat visible en quelques minutes, satisfaction garantie."},
                    {label:"11. Saisonnalit√©", value:"Automne", definition:"Pic de ventes √† l'automne/hiver quand l'humidit√© rentre."}
                ],
                objections: [{objection:"Dangereux ?", response:"Puissant, n√©cessite a√©ration."}]
            },
            {
                id: 502, univers: 4, fiche: 13, name: "S√©curit√© Sols (Antid√©rapant)", ref: "AS",
                tags: ["S√©curit√©", "Sol", "RSE", "Sp√©cifique"],
                kpis: [{label:"S√©curit√©", value:"Max"}, {label:"Aspect", value:"Invisible"}, {label:"Support", value:"Multi"}],
                pitch: "S√©curisez vos sols en un spray. Vernis transparent invisible ou peinture pour √©viter les chutes. Indispensable.",
                techSpecs: [{label:"Base", value:"Acrylique"}, {label:"Grain", value:"Micro-billes"}, {label:"Usage", value:"Douche/Sol"}],
                techDescription: "Contient des micro-particules invisibles qui cr√©ent un grip antid√©rapant (R10/R11) sans alt√©rer l'esth√©tique du carrelage.",
                colors: ["Vernis Transparent, Blanc, Jaune"],
                businessArgs: [
                    {label:"1. RSE", value:"S√©curit√©", definition:"R√©pond aux obligations de s√©curit√© des entreprises (ERP) et lieux publics."},
                    {label:"2. Innovation", value:"Invisible", definition:"Le vernis transparent pour bac √† douche est une solution unique sur le march√©."},
                    {label:"3. Bricolage", value:"Maison", definition:"Id√©al pour s√©curiser un escalier ext√©rieur, une terrasse bois, un bord de piscine."},
                    {label:"4. Concurrence", value:"Nulle", definition:"Quasi-monopole sur ce type de solution pratique en a√©rosol."},
                    {label:"5. Valeur", value:"Service", definition:"Vous ne vendez pas de la peinture, vous vendez de la tranquillit√© d'esprit (Enfants/Seniors)."},
                    {label:"6. Cible", value:"Senior", definition:"Produit rassurant pour l'adaptation du logement (Silver Economy)."},
                    {label:"7. Marge", value:"Forte", definition:"Produit technique √† forte valeur."},
                    {label:"8. Facilit√©", value:"Spray", definition:"Application beaucoup plus simple et rapide qu'une r√©sine au rouleau."},
                    {label:"9. Usage", value:"Ext√©rieur", definition:"R√©siste aux intemp√©ries (bords de piscine, marches de jardin)."},
                    {label:"10. Signalisation", value:"Jaune", definition:"La version Jaune sert au marquage de s√©curit√© visuel (nez de marches)."},
                    {label:"11. Cross-Merch", value:"Carrelage", definition:"√Ä placer aussi au rayon Sol/Carrelage."}
                ],
                objections: [{objection:"Vraiment invisible ?", response:"Le vernis est transparent, il matifie l√©g√®rement la surface pour l'adh√©rence."}]
            },
            {
                id: 503, univers: 4, fiche: 14, name: "Lubrifiants & Maintenance", ref: "LA",
                tags: ["Lubrifiant", "Maintenance", "Tech", "Pro"],
                kpis: [{label:"Gamme", value:"Compl√®te"}, {label:"Tech", value:"PTFE/Dielect"}, {label:"Usage", value:"Atelier"}],
                pitch: "L'arsenal du maintenancier. D√©grippant, Graisse Cha√Æne, Protection √©lectrique. Tout pour l'atelier.",
                techSpecs: [{label:"Relaxex", value:"P√©n√©trant"}, {label:"TX-2", value:"Di√©lectrique"}, {label:"Grasa", value:"PTFE"}],
                techDescription: "Chimie fine : Le TX-2 isole jusqu'√† 32.000 Volts. La graisse PTFE ne centrifuge pas. Le Relaxex utilise le choc thermique.",
                colors: ["D√©grippant, Graisse Cha√Æne, Protection Elec, Anticorrosion"],
                businessArgs: [
                    {label:"1. Panier", value:"Caisse", definition:"Produits d'impulsion par excellence √† placer en devant de caisse ou comptoir pro."},
                    {label:"2. Technicit√©", value:"Haut Niveau", definition:"Le TX-2 et la Graisse Cha√Æne ciblent des besoins tr√®s sp√©cifiques (√©lec, moto)."},
                    {label:"3. Consommable", value:"Quotidien", definition:"Rotation rapide en milieu professionnel. Un atelier en consomme des litres."},
                    {label:"4. Cr√©dibilit√©", value:"Globale", definition:"Montre que FM Spray ma√Ætrise toute la chimie, pas que la peinture."},
                    {label:"5. Service", value:"Complet", definition:"Permet de fournir une solution globale de maintenance √† l'atelier."},
                    {label:"6. Cible", value:"Mecano", definition:"Indispensable pour l'entretien moto/v√©lo et la m√©canique de pr√©cision."},
                    {label:"7. Marge", value:"Volume", definition:"Produits √† forte rotation et marge constante."},
                    {label:"8. Qualit√©", value:"Pro", definition:"Formulations sup√©rieures aux standards GSB classiques."},
                    {label:"9. Compl√©ment", value:"Atelier", definition:"S'ajoute √† tout achat d'outillage ou de quincaillerie."},
                    {label:"10. Innovation", value:"Tech", definition:"Produits sp√©cifiques (Di√©lectrique) rares en rayon grand public."},
                    {label:"11. Fid√©lit√©", value:"Usage", definition:"Un bon d√©grippant fid√©lise le client pour la vie."}
                ],
                objections: [{objection:"Concurrence WD40 ?", response:"Nos produits sont techniques et sp√©cialis√©s (Dielectrique, Graisse Cha√Æne) l√† o√π WD40 est g√©n√©raliste."}]
            }
        ];

        // --- DONN√âES OBJECTIONS (NOUVEAU) ---
        const objectionsData = [
            // TH√àME 1 : PRIX & RENTABILIT√â
            {
                id: 1,
                theme: "PRIX & RENTABILIT√â",
                question: "Vous √™tes plus cher que ma Marque de Distributeur (MDD).",
                response: "C'est normal. Votre MDD couvre l'entr√©e de gamme. Nous apportons la technicit√© (Zinc 98%, Haute Temp√©rature) que vous ne pouvez pas fabriquer en gros volume. Nous sommes le produit 'Premium' qui valorise votre rayon."
            },
            {
                id: 2,
                theme: "PRIX & RENTABILIT√â",
                question: "Je n'ai pas assez de marge sur votre Zinc √† 2,90 ‚Ç¨.",
                response: "Faisons le calcul. Prix de vente march√© : 13 ‚Ç¨ TTC. Prix d'achat : 2,90 ‚Ç¨. Vous faites 73% de marge. C'est probablement l'un des produits les plus rentables de votre rayon."
            },
            {
                id: 3,
                theme: "PRIX & RENTABILIT√â",
                question: "Je veux une remise suppl√©mentaire de 10% pour r√©f√©rencer la gamme.",
                response: "Je vous propose d√©j√† un prix 'Direct Usine' sans interm√©diaire. Je ne peux pas baisser le net sans toucher √† la qualit√©. Par contre, je peux d√©clencher une RFA (Remise de Fin d'Ann√©e) de 2% si on atteint les objectifs de volume."
            },
            {
                id: 4,
                theme: "PRIX & RENTABILIT√â",
                question: "Vos concurrents me paient l'implantation (droits d'entr√©e).",
                response: "Nous ne croyons pas aux ch√®ques en blanc, mais au partenariat. Nous investissons ce budget dans la qualit√© produit et le stock pour vous livrer vite (Franco 400‚Ç¨), ce qui est plus rentable pour vous au quotidien."
            },
            {
                id: 5,
                theme: "PRIX & RENTABILIT√â",
                question: "Le prix du transport depuis l'Espagne va tuer ma marge.",
                response: "Absolument pas. Le transport est inclus dans notre tarif d√®s 400 ‚Ç¨ de commande (Franco). C'est transparent pour vous."
            },
            {
                id: 6,
                theme: "PRIX & RENTABILIT√â",
                question: "Pourquoi votre peinture D√©co est √† 2,20‚Ç¨ ? C'est louche.",
                response: "C'est le prix de la ma√Ætrise industrielle. Nous fabriquons nos r√©sines. C'est la m√™me qualit√© qu'une bombe √† 8‚Ç¨, mais vous ne payez pas la marque ni la pub TV."
            },

            // TH√àME 2 : PRODUIT & TECHNIQUE
            {
                id: 7,
                theme: "PRODUIT & TECHNIQUE",
                question: "Le Zinc en bombe, c'est juste de la peinture grise, √ßa ne prot√®ge pas.",
                response: "Faux chez nous. Notre Zinc Mat contient 98% de Zinc pur dans le film sec. C'est une v√©ritable protection cathodique (anode sacrificielle) : m√™me ray√©, le m√©tal ne rouille pas."
            },
            {
                id: 8,
                theme: "PRODUIT & TECHNIQUE",
                question: "J'ai peur que les buses se bouchent, c'est le probl√®me n¬∞1.",
                response: "Nous utilisons des valves autonettoyantes de derni√®re g√©n√©ration sur toute la gamme. Le taux de retour SAV pour bouchage est inf√©rieur √† 0,1%."
            },
            {
                id: 9,
                theme: "PRODUIT & TECHNIQUE",
                question: "Votre peinture Haute Temp√©rature, elle tient vraiment ?",
                response: "Elle est certifi√©e pour r√©sister √† 600¬∞C en continu. C'est indispensable pour la s√©curit√© sur des po√™les ou des √©chappements. Une peinture classique prendrait feu ou p√®lerait."
            },
            {
                id: 10,
                theme: "PRODUIT & TECHNIQUE",
                question: "Le 85 GLADIO, c'est juste de l'eau de Javel reconditionn√©e.",
                response: "Non, c'est une formule professionnelle stabilis√©e avec des tensioactifs p√©n√©trants. La Javel blanchit la surface ; le Gladio tue la racine du champignon dans le support."
            },
            {
                id: 11,
                theme: "PRODUIT & TECHNIQUE",
                question: "Vos bombes de peinture auto, la couleur ne correspond jamais.",
                response: "Sur nos gammes RAL et Agricoles, nous respectons scrupuleusement le code colorim√©trique industriel (ex: Vert John Deere). La teinte est garantie conforme √† l'origine."
            },
            {
                id: 12,
                theme: "PRODUIT & TECHNIQUE",
                question: "Est-ce que vos peintures couvrent bien ?",
                response: "Ce sont des formules 'High Solid' (Haut Extrait Sec). Une seule couche de notre D√©co suffit l√† o√π il en faut deux chez les concurrents 'premier prix'."
            },
            {
                id: 13,
                theme: "PRODUIT & TECHNIQUE",
                question: "Vos produits sentent fort, mes clients n'aiment pas √ßa.",
                response: "Nous respectons strictement la r√©glementation sur les COV. De plus, nos produits sont √©tiquet√©s A+ (tr√®s faibles √©missions dans l'air int√©rieur), ce qui est rassurant pour l'usage domestique."
            },

            // TH√àME 3 : LOGISTIQUE & APPROVISIONNEMENT
            {
                id: 14,
                theme: "LOGISTIQUE & APPROVISIONNEMENT",
                question: "L'Espagne, c'est trop loin, vous ne livrerez jamais √† temps.",
                response: "Notre usine d'Hernani est √† la fronti√®re, √† 20 min de la France. Nous livrons en J+4 partout en France, souvent plus vite qu'un fournisseur bas√© √† Paris ou Lyon."
            },
            {
                id: 15,
                theme: "LOGISTIQUE & APPROVISIONNEMENT",
                question: "Je ne peux pas stocker des palettes enti√®res.",
                response: "Justement ! Notre Franco est √† 400 ‚Ç¨. Vous pouvez commander seulement quelques cartons panach√©s. C'est id√©al pour le z√©ro stock."
            },
            {
                id: 16,
                theme: "LOGISTIQUE & APPROVISIONNEMENT",
                question: "Vos cartons de 12, c'est trop gros pour mes petits magasins.",
                response: "Sur les produits √† rotation plus lente (comme les teintes agricoles ou les effets sp√©ciaux), nous sommes en colisage de 6. C'est tr√®s facile √† √©couler."
            },
            {
                id: 17,
                theme: "LOGISTIQUE & APPROVISIONNEMENT",
                question: "Que se passe-t-il en cas de rupture de stock chez vous ?",
                response: "En tant que fabricant, nous avons le stock de mati√®res premi√®res. Nous ne sommes pas d√©pendants d'un container qui arrive de Chine. Nous avons la main sur la production."
            },
            {
                id: 18,
                theme: "LOGISTIQUE & APPROVISIONNEMENT",
                question: "Acceptez-vous de reprendre les invendus ?",
                response: "Pour la commande d'implantation, oui. Si au bout de 6 mois une r√©f√©rence ne tourne pas, on l'√©change contre une r√©f√©rence qui cartonne (le 1 pour 1)."
            },

            // TH√àME 4 : MARQUE & MARKETING
            {
                id: 19,
                theme: "MARQUE & MARKETING",
                question: "Personne ne connait la marque FM Spray.",
                response: "C'est une opportunit√©. Vos clients ne peuvent pas comparer nos prix sur Amazon. C'est un produit exclusif pour votre enseigne qui fid√©lise vos clients."
            },
            {
                id: 20,
                theme: "MARQUE & MARKETING",
                question: "Vos packagings font 'vieux' ou 'industriel'.",
                response: "C'est un choix. √áa fait 'Produit Pro'. Le bricoleur fait plus confiance √† un packaging technique qu'√† un packaging trop marketing qui cache souvent un produit m√©diocre."
            },
            {
                id: 21,
                theme: "MARQUE & MARKETING",
                question: "Tout est √©crit en espagnol sur la bombe ?",
                response: "Non, regardez l'√©chantillon. Toutes les mentions l√©gales, de s√©curit√© et d'utilisation sont en Fran√ßais, Espagnol, Anglais et Portugais. C'est 100% conforme."
            },
            {
                id: 22,
                theme: "MARQUE & MARKETING",
                question: "Je n'ai pas de place en rayon.",
                response: "Faisons le m√©nage. Enlevez les 3 r√©f√©rences concurrentes qui tournent le moins et mettez notre Zinc et notre Gladio √† la place. Votre rentabilit√© au m√®tre lin√©aire va augmenter."
            },
            {
                id: 23,
                theme: "MARQUE & MARKETING",
                question: "Allez-vous faire de la pub TV pour nous aider √† vendre ?",
                response: "Non, car cela augmenterait le prix d'achat. Nous pr√©f√©rons vous donner ce budget sous forme de prix bas (2,20‚Ç¨) pour que vous soyez comp√©titifs face √† Action."
            },

            // TH√àME 5 : STRAT√âGIE & CONCURRENCE
            {
                id: 24,
                theme: "STRAT√âGIE & CONCURRENCE",
                question: "J'ai d√©j√† Julien et Rust-Oleum, je suis complet.",
                response: "Ils sont tr√®s bien, mais chers. Nous sommes le maillon manquant : la qualit√© industrielle au prix d'un produit d'appel. Nous compl√©tons l'offre par le bas du prix, sans baisser la qualit√©."
            },
            {
                id: 25,
                theme: "STRAT√âGIE & CONCURRENCE",
                question: "Action vend de la peinture √† 2,50‚Ç¨, vous ne ferez pas le poids.",
                response: "Avec nous, vous achetez la D√©co √† 2,20‚Ç¨. Vous pouvez la vendre √† 3,90‚Ç¨ ou 4,50‚Ç¨. Vous restez plus cher qu'Action, mais vous vendez une qualit√© acrylique bien sup√©rieure et le conseil en plus."
            },
            {
                id: 26,
                theme: "STRAT√âGIE & CONCURRENCE",
                question: "Je ne veux pas multiplier les fournisseurs (Rationalisation).",
                response: "Je comprends. Mais avec notre gamme de 50 produits (Auto, D√©co, Bati), nous pouvons remplacer 2 ou 3 petits fournisseurs de niche. Nous sommes un g√©n√©raliste de l'a√©rosol."
            },
            {
                id: 27,
                theme: "STRAT√âGIE & CONCURRENCE",
                question: "Vos produits agricole, c'est une niche trop petite.",
                response: "C'est une niche captive. L'agriculteur qui cherche son 'Vert John Deere' ne l'ach√®tera que s'il le trouve. Si vous l'avez, il ach√®te aussi ses outils chez vous. C'est un produit d'attraction."
            },
            {
                id: 28,
                theme: "STRAT√âGIE & CONCURRENCE",
                question: "Je travaille uniquement avec des marques fran√ßaises.",
                response: "Nous sommes europ√©ens, voisins, et nous respectons toutes les normes fran√ßaises (A+). De plus, notre flexibilit√© (Franco 400‚Ç¨) est meilleure que bien des fran√ßais."
            },
            {
                id: 29,
                theme: "STRAT√âGIE & CONCURRENCE",
                question: "Le march√© du bricolage baisse, je ne prends pas de risque.",
                response: "Justement, en p√©riode de crise, les gens r√©parent au lieu de jeter. Nos peintures 'R√©novation' (√âlectrom√©nager, Radiateurs) sont les produits anti-crise par excellence."
            },
            {
                id: 30,
                theme: "STRAT√âGIE & CONCURRENCE",
                question: "Je ne signe rien aujourd'hui.",
                response: "Pas de probl√®me. Signons juste pour un test sur vos 20 plus gros magasins. Le risque est nul, et on fait le bilan dans 3 mois. √áa vous va ?"
            }
        ];

        // --- MAPPING UNIVERS ---
        const universMap = {
            1: { label: "D√©coration & Maison", icon: "brush", color: "text-purple-600 bg-purple-50" },
            2: { label: "M√©tal & Technique", icon: "wrench", color: "text-blue-600 bg-blue-50" },
            3: { label: "Auto & Agricole", icon: "car", color: "text-green-600 bg-green-50" },
            4: { label: "Maintenance", icon: "shield-check", color: "text-orange-600 bg-orange-50" }
        };

        // --- APP STATE & UTILS ---
        let currentView = 'discovery'; 
        let activeUnivers = 0;
        let searchTerm = "";
        let quoteItems = [];
        let currentObjectionFilter = 'all';
        let objectionSearchQuery = '';

        function switchView(viewName) {
            currentView = viewName;
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            const activeNav = document.getElementById(`nav-${viewName}`);
            if(activeNav) activeNav.classList.add('active');
            
            document.getElementById('view-discovery').classList.add('hidden');
            document.getElementById('view-catalog').classList.add('hidden');
            document.getElementById('view-prices').classList.add('hidden');
            document.getElementById('view-quote').classList.add('hidden');
            document.getElementById('view-history').classList.add('hidden');
            document.getElementById('view-objections').classList.add('hidden');
            document.getElementById('view-calculator').classList.add('hidden'); // NEW
            
            document.getElementById(`view-${viewName}`).classList.remove('hidden');

            const searchContainer = document.getElementById('search-container');
            if(viewName === 'discovery') {
                searchContainer.classList.add('invisible');
                document.getElementById('page-title').innerText = "Guide d'Entretien";
                document.getElementById('page-subtitle').innerText = "Questions & Strat√©gie";
                renderDiscovery();
            } else if (viewName === 'quote') {
                searchContainer.classList.add('invisible');
                document.getElementById('page-title').innerText = "G√©n√©rateur de Devis";
                document.getElementById('page-subtitle').innerText = "Simulation rapide pour l'acheteur";
                renderQuoteForm();
            } else if (viewName === 'prices') {
                searchContainer.classList.add('invisible');
                document.getElementById('page-title').innerText = "Grille Tarifaire";
                document.getElementById('page-subtitle').innerText = "Prix nets & Colisages";
                // renderPriceList(); // REMOVED - Using static HTML from PDF
            } else if (viewName === 'history') {
                searchContainer.classList.add('invisible');
                document.getElementById('page-title').innerText = "Histoire de l'Entreprise";
                document.getElementById('page-subtitle').innerText = "Pr√©sentation & Valeurs";
            } else if (viewName === 'objections') {
                searchContainer.classList.add('invisible');
                document.getElementById('page-title').innerText = "Traitement des Objections";
                document.getElementById('page-subtitle').innerText = "Base de donn√©es : 30 sc√©narios";
                renderObjectionsList();
            } else if (viewName === 'calculator') { // NEW
                searchContainer.classList.add('invisible');
                document.getElementById('page-title').innerText = "Calculateur de Rentabilit√©";
                document.getElementById('page-subtitle').innerText = "Outil de n√©gociation commerciale";
            } else {
                searchContainer.classList.remove('invisible');
                document.getElementById('page-title').innerText = "Catalogue Produits";
                document.getElementById('page-subtitle').innerText = "Fiches d√©taill√©es (10+ Arguments)";
                renderFilters();
                renderProducts();
            }
            lucide.createIcons();
        }

        // --- OBJECTIONS LOGIC (NEW) ---
        function getThemeColor(theme) {
            switch(theme) {
                case 'PRIX & RENTABILIT√â': return 'bg-green-100 text-green-800 border-green-200';
                case 'PRODUIT & TECHNIQUE': return 'bg-blue-100 text-blue-800 border-blue-200';
                case 'LOGISTIQUE & APPROVISIONNEMENT': return 'bg-orange-100 text-orange-800 border-orange-200';
                case 'MARQUE & MARKETING': return 'bg-purple-100 text-purple-800 border-purple-200';
                case 'STRAT√âGIE & CONCURRENCE': return 'bg-red-100 text-red-800 border-red-200';
                default: return 'bg-gray-100 text-gray-800';
            }
        }

        function getThemeIcon(theme) {
            switch(theme) {
                case 'PRIX & RENTABILIT√â': return 'euro';
                case 'PRODUIT & TECHNIQUE': return 'flask-conical';
                case 'LOGISTIQUE & APPROVISIONNEMENT': return 'truck';
                case 'MARQUE & MARKETING': return 'megaphone';
                case 'STRAT√âGIE & CONCURRENCE': return 'swords';
                default: return 'message-square';
            }
        }

        function toggleAnswer(id) {
            const answerDiv = document.getElementById(`answer-${id}`);
            const icon = document.getElementById(`icon-${id}`);
            const card = document.getElementById(`card-${id}`);

            if (answerDiv.classList.contains('hidden')) {
                answerDiv.classList.remove('hidden');
                icon.innerHTML = ''; 
                icon.setAttribute('data-lucide', 'minus');
                card.classList.add('ring-2', 'ring-blue-500');
            } else {
                answerDiv.classList.add('hidden');
                icon.innerHTML = ''; 
                icon.setAttribute('data-lucide', 'plus');
                card.classList.remove('ring-2', 'ring-blue-500');
            }
            lucide.createIcons();
        }

        function renderObjectionsList() {
            const listContainer = document.getElementById('objectionsList');
            listContainer.innerHTML = '';
            
            const filteredData = objectionsData.filter(item => {
                const matchesTheme = currentObjectionFilter === 'all' || item.theme === currentObjectionFilter;
                const matchesSearch = item.question.toLowerCase().includes(objectionSearchQuery.toLowerCase()) || 
                                      item.response.toLowerCase().includes(objectionSearchQuery.toLowerCase()) ||
                                      item.theme.toLowerCase().includes(objectionSearchQuery.toLowerCase());
                return matchesTheme && matchesSearch;
            });

            if (filteredData.length === 0) {
                listContainer.innerHTML = `
                    <div class="text-center py-10 text-gray-500">
                        <i data-lucide="search-x" class="w-12 h-12 mx-auto mb-3 opacity-20"></i>
                        <p>Aucune objection trouv√©e pour cette recherche.</p>
                    </div>
                `;
                lucide.createIcons();
                return;
            }

            filteredData.forEach(item => {
                const themeClass = getThemeColor(item.theme);
                const themeIcon = getThemeIcon(item.theme);

                const cardHTML = `
                    <div id="card-${item.id}" class="objection-card bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden cursor-pointer group" onclick="toggleAnswer(${item.id})">
                        <div class="p-5">
                            <div class="flex items-start justify-between gap-4">
                                <div class="flex-1">
                                    <span class="inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-bold uppercase tracking-wide ${themeClass} mb-2">
                                        <i data-lucide="${themeIcon}" class="w-3 h-3"></i> ${item.theme}
                                    </span>
                                    <h3 class="text-lg font-bold text-slate-800 leading-tight group-hover:text-blue-600 transition-colors">"${item.question}"</h3>
                                </div>
                                <div class="text-gray-400 hover:text-blue-500 transition-colors mt-1 bg-slate-50 p-2 rounded-full">
                                    <i id="icon-${item.id}" data-lucide="plus" class="w-5 h-5"></i>
                                </div>
                            </div>
                            
                            <div id="answer-${item.id}" class="hidden mt-4 pt-4 border-t border-gray-100 animate-fade-in">
                                <div class="response-box bg-blue-50 p-6 rounded-r-xl text-slate-700 leading-relaxed text-base shadow-inner">
                                    <span class="font-bold text-blue-700 block mb-2 text-xs uppercase tracking-widest flex items-center gap-2"><i data-lucide="message-circle" class="w-4 h-4"></i> R√©ponse sugg√©r√©e :</span>
                                    ${item.response}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                listContainer.insertAdjacentHTML('beforeend', cardHTML);
            });
            lucide.createIcons();
        }

        function filterObjections(theme) {
            currentObjectionFilter = theme;
            
            document.querySelectorAll('.theme-filter-btn').forEach(btn => {
                btn.classList.remove('active', 'ring-2', 'ring-offset-2', 'ring-slate-400');
                if(btn.id === 'filter-all' && theme === 'all') btn.classList.add('active', 'ring-2', 'ring-offset-2', 'ring-slate-400');
                if(btn.id === 'filter-prix' && theme === 'PRIX & RENTABILIT√â') btn.classList.add('active', 'ring-2', 'ring-offset-2', 'ring-green-400');
                if(btn.id === 'filter-tech' && theme === 'PRODUIT & TECHNIQUE') btn.classList.add('active', 'ring-2', 'ring-offset-2', 'ring-blue-400');
                if(btn.id === 'filter-log' && theme === 'LOGISTIQUE & APPROVISIONNEMENT') btn.classList.add('active', 'ring-2', 'ring-offset-2', 'ring-orange-400');
                if(btn.id === 'filter-mark' && theme === 'MARQUE & MARKETING') btn.classList.add('active', 'ring-2', 'ring-offset-2', 'ring-purple-400');
                if(btn.id === 'filter-strat' && theme === 'STRAT√âGIE & CONCURRENCE') btn.classList.add('active', 'ring-2', 'ring-offset-2', 'ring-red-400');
            });

            renderObjectionsList();
        }

        document.getElementById('objectionSearchInput').addEventListener('input', (e) => {
            objectionSearchQuery = e.target.value;
            renderObjectionsList();
        });

        // --- CALCULATOR LOGIC (NEW) ---
        const calcPA = document.getElementById('calc-pa');
        const calcMargin = document.getElementById('calc-margin');
        const resPV = document.getElementById('res-pv');
        const resVal = document.getElementById('res-val');
        const resCoef = document.getElementById('res-coef');
        const resPvTtc = document.getElementById('res-pv-ttc'); // Get element for TTC

        function updateCalculation() {
            const pa = parseFloat(calcPA.value);
            const margin = parseFloat(calcMargin.value);

            if (!pa || pa <= 0) {
                resPV.innerText = "0.00 ‚Ç¨";
                resPvTtc.innerText = "0.00 ‚Ç¨"; // Reset TTC
                resVal.innerText = "+0.00 ‚Ç¨";
                resCoef.innerText = "x 0.00";
                return;
            }

            if (!margin || margin <= 0) {
                // Si pas de marge, PV = PA
                const pv = pa;
                const pvTtc = pv * 1.20; // TTC Calc

                resPV.innerText = pv.toFixed(2) + " ‚Ç¨";
                resPvTtc.innerText = pvTtc.toFixed(2) + " ‚Ç¨"; // Show TTC
                resVal.innerText = "0.00 ‚Ç¨";
                resCoef.innerText = "x 1.00";
                return;
            }

            if (margin >= 100) {
                resPV.innerText = "Erreur";
                resPvTtc.innerText = "-";
                return;
            }

            // Formule Marge Commerciale : PV = PA / (1 - TauxMarge)
            const pv = pa / (1 - (margin / 100));
            const pvTtc = pv * 1.20; // TTC Calc (20%)
            const val = pv - pa;
            const coef = pv / pa;

            resPV.innerText = pv.toFixed(2) + " ‚Ç¨";
            resPvTtc.innerText = pvTtc.toFixed(2) + " ‚Ç¨"; // Show TTC
            resVal.innerText = "+" + val.toFixed(2) + " ‚Ç¨";
            resCoef.innerText = "x " + coef.toFixed(2);
        }

        function setMargin(val) {
            calcMargin.value = val;
            updateCalculation();
        }

        calcPA.addEventListener('input', updateCalculation);
        calcMargin.addEventListener('input', updateCalculation);


        // --- VIEW: DISCOVERY (STATIC) ---
        function renderDiscovery() {
            const container = document.getElementById('discovery-content');
            container.innerHTML = "";

            discoveryQuestions.forEach((phase, i) => {
                const html = `
                    <div class="mb-12 animate-fade-in" style="animation-delay: ${i * 100}ms">
                        <div class="flex items-center gap-4 mb-6 pb-3 border-b-2 ${phase.color.replace('bg-', 'border-').split(' ')[0]}">
                            <div class="p-3 rounded-lg shadow-sm bg-white border border-slate-100 text-slate-700">
                                <i data-lucide="${phase.icon}" class="w-6 h-6"></i>
                            </div>
                            <div>
                                <h3 class="text-lg font-black text-slate-800 uppercase tracking-widest">${phase.phase}</h3>
                                <p class="text-sm text-slate-500 font-medium">${phase.subtitle}</p>
                            </div>
                        </div>
                        <div class="space-y-4">
                            ${phase.questions.map((q) => `
                                <div class="bg-white p-5 rounded-xl shadow-sm border border-slate-200 hover:border-slate-300 transition-all">
                                    <p class="text-base font-bold text-slate-800 mb-3 flex gap-3 leading-snug">
                                        <span class="text-red-500 font-black">Q.</span>
                                        ${q}
                                    </p>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.innerHTML += html;
            });
            lucide.createIcons();
        }

        // --- VIEW: CATALOG ---
        function renderFilters() {
            const container = document.getElementById('universFilters');
            container.innerHTML = `<button onclick="setUnivers(0)" class="px-5 py-2.5 rounded-full text-sm font-bold border transition-all ${activeUnivers === 0 ? 'bg-slate-900 text-white border-slate-900 shadow-md' : 'bg-white text-slate-600 border-slate-200 hover:border-slate-400 hover:bg-slate-50'}">Tout Voir</button>`;
            
            Object.entries(universMap).forEach(([id, u]) => {
                const isActive = activeUnivers == id;
                const btnClass = isActive 
                    ? `bg-white ring-2 ring-inset ring-slate-900 text-slate-900 shadow-md` 
                    : `bg-white border border-slate-200 text-slate-500 hover:bg-slate-50 hover:text-slate-800`;
                
                container.innerHTML += `
                    <button onclick="setUnivers(${id})" class="px-5 py-2.5 rounded-full text-sm font-bold transition-all flex items-center gap-2 ${btnClass}">
                        <i data-lucide="${u.icon}" class="w-4 h-4"></i> ${u.label}
                    </button>
                `;
            });
            lucide.createIcons();
        }

        function setUnivers(id) {
            activeUnivers = id;
            document.getElementById('searchInput').value = "";
            searchTerm = "";
            renderFilters();
            renderProducts();
        }

        function renderProducts() {
            const container = document.getElementById('productsGrid');
            const empty = document.getElementById('emptyState');
            container.innerHTML = "";
            
            const filtered = productsData.filter(p => {
                const matchUnivers = activeUnivers === 0 || p.univers === activeUnivers;
                const search = searchTerm.toLowerCase();
                const matchSearch = !search || 
                    p.name.toLowerCase().includes(search) || 
                    p.ref.toLowerCase().includes(search) || 
                    p.tags.some(t => t.toLowerCase().includes(search));
                return matchUnivers && matchSearch;
            });

            if(filtered.length === 0) {
                container.classList.add('hidden');
                empty.classList.remove('hidden');
                empty.classList.add('flex');
                return;
            }

            container.classList.remove('hidden');
            empty.classList.add('hidden');
            empty.classList.remove('flex');

            filtered.forEach(p => {
                const uColor = universMap[p.univers].color.split(" ")[0]; 
                
                let tagsHtml = p.tags.map(t => `<span class="text-[9px] uppercase font-bold px-2 py-0.5 rounded bg-slate-100 text-slate-500 border border-slate-200 tracking-wider">${t}</span>`).join('');
                
                let kpisHtml = p.kpis.map(k => `
                    <div class="text-center flex-1 border-r border-slate-100 last:border-0 px-2">
                        <span class="block text-sm font-black text-slate-800">${k.value}</span>
                        <span class="text-[9px] uppercase font-bold text-slate-400 truncate w-full block">${k.label}</span>
                    </div>
                `).join('');

                let colorsHtml = p.colors.map(c => {
                    let dotColor = "#e2e8f0";
                    const lowerC = c.toLowerCase();
                    if(lowerC.includes('rojo') || lowerC.includes('rouge')) dotColor = "#ef4444";
                    else if(lowerC.includes('amarillo') || lowerC.includes('jaune') || lowerC.includes('oro') || lowerC.includes('or')) dotColor = "#eab308";
                    else if(lowerC.includes('azul') || lowerC.includes('bleu')) dotColor = "#3b82f6";
                    else if(lowerC.includes('verde') || lowerC.includes('vert')) dotColor = "#22c55e";
                    else if(lowerC.includes('negro') || lowerC.includes('noir')) dotColor = "#1e293b";
                    else if(lowerC.includes('blanco') || lowerC.includes('blanc')) dotColor = "#ffffff";
                    else if(lowerC.includes('naranja') || lowerC.includes('orange')) dotColor = "#f97316";
                    
                    const formattedC = c.replace(/\*\*(.*?)\*\*/g, '<span class="font-bold text-slate-900">$1</span>');
                    return `<li class="text-[11px] text-slate-600 flex items-start py-1 border-b border-slate-50 last:border-0"><span class="color-dot mt-0.5" style="background:${dotColor}"></span><span>${formattedC}</span></li>`;
                }).join('');

                let bizHtml = p.businessArgs.map((a, idx) => `
                    <div class="mb-3 last:mb-0 border-b border-slate-50 pb-2 last:border-0 last:pb-0">
                        <div class="flex justify-between items-center mb-0.5">
                            <div class="flex items-center">
                                <span class="arg-bullet">${idx + 1}</span>
                                <span class="text-[10px] font-bold uppercase text-slate-500">${a.label}</span>
                            </div>
                            <span class="text-[11px] font-bold ${uColor} bg-slate-50 px-2 py-0.5 rounded">${a.value}</span>
                        </div>
                        <p class="text-[11px] text-slate-600 italic pl-8 leading-snug">"${a.definition}"</p>
                    </div>
                `).join('');

                let techHtml = p.techSpecs.map(t => `
                    <div class="flex justify-between border-b border-slate-100 py-1.5 last:border-0">
                        <span class="text-xs text-slate-500 font-medium">${t.label}</span>
                        <span class="text-xs font-bold text-slate-800">${t.value}</span>
                    </div>
                `).join('');

                let objectionHtml = '';
                if(p.objections && p.objections.length > 0) {
                    objectionHtml = `
                        <div class="mt-4 pt-3 border-t border-slate-100 bg-red-50 p-2 rounded">
                            <span class="text-[10px] font-bold text-red-600 uppercase flex items-center gap-1"><i data-lucide="shield-alert" class="w-3 h-3"></i> Objection :</span>
                            <p class="text-[11px] text-slate-700 font-medium">"${p.objections[0].objection}"</p>
                            <p class="text-[11px] text-slate-500 mt-1 italic">‚Üí ${p.objections[0].response}</p>
                        </div>
                    `;
                }

                const cardHTML = `
                    <div class="bg-white rounded-xl shadow-lg border border-slate-200 overflow-hidden flex flex-col hover:shadow-2xl transition-all duration-300 relative group">
                        <div class="p-4 border-b border-slate-100 bg-gradient-to-b from-white to-slate-50/50">
                            <div class="flex justify-between items-start mb-2">
                                <span class="bg-slate-900 text-white text-[10px] font-condensed font-bold px-2 py-0.5 rounded shadow-sm">FICHE ${p.fiche}</span>
                                <span class="text-[10px] font-mono text-slate-400 font-bold">${p.ref}</span>
                            </div>
                            <h3 class="text-lg font-condensed font-bold text-slate-900 leading-tight mb-2 group-hover:text-red-600 transition-colors">${p.name}</h3>
                            <div class="flex gap-1 mb-3 flex-wrap">${tagsHtml}</div>
                            <div class="flex items-center justify-between bg-white rounded-lg border border-slate-200 shadow-sm py-2">
                                ${kpisHtml}
                            </div>
                        </div>

                        <div class="flex border-b border-slate-200 bg-white sticky top-0 z-10">
                            <button onclick="switchTab(this, 'biz', ${p.id})" class="tab-btn active flex-1 py-2.5 text-[10px] font-bold uppercase tracking-wide text-slate-400 hover:bg-slate-50 transition-colors">Business</button>
                            <button onclick="switchTab(this, 'colors', ${p.id})" class="tab-btn flex-1 py-2.5 text-[10px] font-bold uppercase tracking-wide text-slate-400 hover:bg-slate-50 transition-colors">Nuancier</button>
                            <button onclick="switchTab(this, 'tech', ${p.id})" class="tab-btn flex-1 py-2.5 text-[10px] font-bold uppercase tracking-wide text-slate-400 hover:bg-slate-50 transition-colors">Tech</button>
                        </div>

                        <div class="p-4 bg-white h-80 overflow-y-auto custom-scrollbar relative content-area">
                            <div id="tab-biz-${p.id}" class="tab-content fade-in">
                                <div class="bg-blue-50 border-l-4 border-blue-500 p-3 rounded mb-4 shadow-sm">
                                    <h4 class="text-[10px] font-bold uppercase text-blue-700 mb-1 flex items-center gap-1"><i data-lucide="zap" class="w-3 h-3"></i> Argument Choc</h4>
                                    <p class="text-xs font-semibold text-slate-800 leading-relaxed">"${p.pitch}"</p>
                                </div>
                                <div class="space-y-1">${bizHtml}</div>
                                ${objectionHtml}
                            </div>

                            <div id="tab-colors-${p.id}" class="tab-content hidden fade-in">
                                <div class="flex justify-between items-center mb-3 sticky top-0 bg-white pb-2 border-b border-slate-100">
                                    <h4 class="text-[10px] font-bold uppercase text-slate-400">R√©f√©rences (${p.colors.length})</h4>
                                </div>
                                <ul class="grid grid-cols-1 gap-0">${colorsHtml}</ul>
                            </div>

                            <div id="tab-tech-${p.id}" class="tab-content hidden fade-in">
                                <div class="mb-4">
                                    <h4 class="text-[10px] font-bold uppercase text-slate-400 mb-2 border-b border-slate-100 pb-1">Donn√©es</h4>
                                    ${techHtml}
                                </div>
                                <div class="bg-slate-50 p-3 rounded border border-slate-200">
                                    <h4 class="text-[10px] font-bold uppercase text-slate-500 mb-1 flex items-center gap-1"><i data-lucide="microscope" class="w-3 h-3"></i> Comment √ßa marche ?</h4>
                                    <p class="text-[11px] text-slate-600 leading-relaxed text-justify">${p.techDescription}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                const tempDiv = document.createElement('div');
                tempDiv.innerHTML = cardHTML;
                container.appendChild(tempDiv.firstElementChild);
            });
            lucide.createIcons();
        }

        function switchTab(btn, tabName, id) {
            const card = btn.closest('.relative');
            card.querySelectorAll('button').forEach(b => {
                b.classList.remove('active', 'text-red-600');
                b.classList.add('text-slate-400');
            });
            btn.classList.add('active', 'text-red-600');
            btn.classList.remove('text-slate-400');

            const contentArea = card.querySelector('.content-area');
            contentArea.querySelectorAll('.tab-content').forEach(c => c.classList.add('hidden'));
            contentArea.querySelector(`#tab-${tabName}-${id}`).classList.remove('hidden');
        }

        document.getElementById('searchInput').addEventListener('input', (e) => {
            searchTerm = e.target.value;
            renderProducts();
        });

        // --- VIEW: QUOTE ---
        function renderQuoteForm() {
            // Populate select
            const select = document.getElementById('quote-product-select');
            if(select.options.length <= 1) {
                productsData.forEach(p => {
                    const option = document.createElement('option');
                    option.value = p.id;
                    option.text = `${p.ref} - ${p.name}`;
                    select.appendChild(option);
                });
            }
        }

        function addToQuote() {
            const id = document.getElementById('quote-product-select').value;
            const qty = parseInt(document.getElementById('quote-qty').value) || 1;
            const price = parseFloat(document.getElementById('quote-price').value) || 0;
            const discount = parseFloat(document.getElementById('quote-discount').value) || 0;

            if (!id) return alert("S√©lectionnez un produit");

            const product = productsData.find(p => p.id == id);
            const totalHT = qty * price * (1 - discount/100);

            quoteItems.push({
                product: product,
                qty: qty,
                price: price,
                discount: discount,
                totalHT: totalHT
            });

            renderQuoteTable();
        }

        function renderQuoteTable() {
            const tbody = document.getElementById('quote-table-body');
            tbody.innerHTML = "";

            let totalGross = 0;
            let totalNet = 0;

            quoteItems.forEach((item, index) => {
                totalGross += item.qty * item.price;
                totalNet += item.totalHT;

                tbody.innerHTML += `
                    <tr class="border-b border-slate-50">
                        <td class="px-6 py-4 font-medium text-slate-900">${item.product.name} <span class="text-slate-400 text-xs block">${item.product.ref}</span></td>
                        <td class="px-6 py-4 text-center">${item.qty}</td>
                        <td class="px-6 py-4 text-right">${item.price.toFixed(2)} ‚Ç¨</td>
                        <td class="px-6 py-4 text-right text-red-500">-${item.discount}%</td>
                        <td class="px-6 py-4 text-right font-bold">${item.totalHT.toFixed(2)} ‚Ç¨</td>
                        <td class="px-6 py-4 text-right">
                            <button onclick="removeQuoteItem(${index})" class="text-slate-400 hover:text-red-600"><i data-lucide="trash-2" class="w-4 h-4"></i></button>
                        </td>
                    </tr>
                `;
            });

            if(quoteItems.length === 0) {
                tbody.innerHTML = `<tr id="empty-row"><td colspan="6" class="px-6 py-12 text-center text-slate-400 italic">Aucun produit ajout√©</td></tr>`;
            }

            document.getElementById('total-gross').innerText = totalGross.toFixed(2) + " ‚Ç¨";
            document.getElementById('total-discount').innerText = "-" + (totalGross - totalNet).toFixed(2) + " ‚Ç¨";
            document.getElementById('total-net').innerText = totalNet.toFixed(2) + " ‚Ç¨";
            
            lucide.createIcons();
        }

        function removeQuoteItem(index) {
            quoteItems.splice(index, 1);
            renderQuoteTable();
        }

        function printQuote() {
            window.print();
        }

        // INIT
        switchView('discovery');
        renderFilters();
        renderProducts();

    </script>
</body>
</html>
